<div class="header pb-8 pt-5 pt-md-8">
  <div class="container-fluid">
    <div class="header-body">
    </div>
  </div>
</div>

<div class="container-fluid mt--7 " id="TB">
  <div class="row">
    <div   [ngClass]="{'col-xl-9 mb-xl-0  bloc1 ': isMobile === false , 'col-xl-11  col-sm-11 p-0 bloc1': isMobile === true}">

      <div class="row bloc-dashboard">
        <div class="col-xl-12 mb-5 mb-xl-0">
          <div class="card  shadow">
            <div class="card-header bg-transparent title-Dachboard">
              <div class="row align-items-center">
                <div class="col-xl-9 col-md-9">
                  <h2 class="text-black mb-0 title-renseignement">Personnaliser les fiches de vos franchises
                  </h2>
                  <p class="description-bloc">Gérer vos franchisés et personnaliser leur Google MyBusiness</p>
                </div>
              </div>
            </div>
            <div class="card-body">
              <div class="row">
                <div class="col-xl-4 col-md-12 " style="padding: 0px 4%;">
                  <div class="bloc-title mb-3">
                    <img src="../assets/Fiche/menu-picto-franchise.svg" style="width: 6%;">
                    <span class="nbr-fiche"><b> {{nbfrachise}}</b> </span> <span class="title"> <b>
                        Franchises</b>enregistrées</span>
                  </div>
                  <div class="row">
                    <div class="col-xl-10 col-md-10 ">
                      <div class="search-fiche">
                        <span class="nom-fiche"> Recherche</span>
                        <div class="input-group input-group-alternative ng-tns-c114-0">
                          <input type="text" name="search" [(ngModel)]="searchFiche" style="padding-left: 4%;"
                            (keyup)=" getListFranchise('' , searchFiche , '' ,'')" placeholder="Nom de la fiche"
                            autocomplete="off" class="form-control ng-tns-c114-0">
                          <i class="fa fa-search"></i>
                        </div>
                      </div>
                    </div>

                    <div class="col-xl-2 col-md-2 filtrefiche">
                      <div class="tooltip" style="left: 0;"> <img src="./assets/Dashboard/icon-filtre.png"
                          class="popover__title">
                        <span class="tooltiptext">
                          <div class="groupeRadio">
                          <span class="titre-filters">CLASSEMENT</span>
                          <div class="form-check fiterradio">
                            <input type="radio" (click)="getListFranchise('' , '' , !Ordrefiche ,'')"
                            value="Ordr" name="mod"   [(ngModel)]="Ordrefiche" class="form-check-input " id="Modification" >
                            <label class="form-check-label listoption" for="Modification">Ordre alphabétique</label><br>
                          </div>
                          <div class="form-check fiterradio classement" *ngFor="let trie of TriList">
                            <input type="radio" value="{{trie.Name}}" name="mod" (change)="getOrderRecent(trie.id)"
                              class="form-check-input " id="{{trie.Name}}">        
                              <label
                              class="form-check-label listoption"
                              for="Modification"
                             >
                              
                              {{ trie.Name }}
                           
                              </label>
                          
                          </div>
                          </div>
                          <div class="groupeRadio">
                          <span class="titre-filters">NIVEAU</span>
                          <div class="form-check drapeux fiterradio"  *ngFor="let item of drapeaux">
                            <label>
                              <input type="radio"   value="{{item.path}}" name="mod"  
                                (click)="getListFranchise('' , '' , '' ,'',item)"
                               class="form-check-input "  id="{{item.path}}">
                              <img class="picto" src="{{item.path}}"/>
                            </label>

                          </div>
                          </div>
                        </span>
                      </div>
                    </div>
                  </div>
                  <div *ngIf="dissociation != null">{{dissociation}}<br> Veuillez taper une autre fiche dans la recherche.</div>
                  <div class="list-fiches">
                    <div *ngFor="let item of listFranchises">
                      <sup class="drapeau-etat"><img src="{{item.etat}}" alt="picto" ></sup>
                      <div  class="fiches " (click)="getListFranchise(item.fiche_id , '' , '' ,'')"
                      [ngClass]="{'my_class': item.status === true}">
                      <span  *ngIf="item.loc== true" ngbTooltip="{{item.locationName}}"   [openDelay]="1000" > {{item.locationName}} </span>
                      <span  *ngIf="item.loc== false"  > {{item.locationName}} </span>

                     </div>
                     
                    </div>
                  </div>
                </div>
                <div class="col-xl-4 col-md-7" *ngFor="let fiche of detailsfiche">
                  <div class="infos_franchise">
                    <img class="logo_franchise" src="./assets/Fiche/logo-franchise.png">
                    <div class=" row desc_franchise">
                      <div class="col-xl-10 col-md-10">
                        <span class="title_franchise">
                          <span [ngClass]="{'old_info' : fiche.locationName.etatvalidation == false}">{{fiche.locationName.locationName}}</span>

                        </span>
                      </div>
                      <div *ngIf="role_id != 3" class="col-xl-2 col-md-2" (click)="ModifContentInfos(contentInfos, 'Nom')">
                        <i class="fa fa-pencil-alt"></i>
                      </div>
                    </div>
                    <div class=" row desc_franchise mt-2">
                      <div class="col-xl-10 col-md-10">
                        <span class="info_franchise" *ngFor="let item of listcategories">
                            <div [ngClass]="{'old_info' : item.etatvalidation == false}">{{item.displayName}}</div>


                        </span>
                      </div>
                      <div *ngIf="role_id != 3 " class="col-xl-2 col-md-2"   (click)="ModifContentInfos(contentInfos , 'Categorie' )">
                        <i class="fa fa-pencil-alt"></i>
                      </div>
                    </div>
                    <hr>
                    <div class=" desc_franchise mb-3">
                      <div class="row mt-3 infos">
                        <div class="col-xl-1 col-md-1 ">
                          <img *ngIf="fiche.adresse.listadrese.adresse != null && fiche.adresse.etatvalidation == true" src="./assets/Fiche/icon_adresse.svg">
                          <img *ngIf="fiche.adresse.listadrese.adresse == null" src="./assets/Fiche/icon_adresse2.svg">
                          <img *ngIf="fiche.adresse.etatvalidation == false" src="./assets/Fiche/icon_adresse_notifs.svg">


                        </div>
                        <div class="col-xl-9 col-md-9">
                          <span class="info_franchise">
                            <span *ngIf="fiche.adresse.listadrese.adresse == null" style="color: #eba10f;">Ajouter une adresse</span>
                            <span [ngClass]="{'old_info' : fiche.adresse.etatvalidation == false}"> {{fiche.adresse.listadrese.adresse}} </span>

                          </span>
                        </div>
                        <div  *ngIf="role_id != 3 " class="col-xl-2 col-md-2"
                          (click)="ModifContentInfos(contentInfos , 'Adresse' ); getAdresselocality()">
                          <i class="fa fa-pencil-alt"></i>
                        </div>
                      </div>
                      <div class="row  mt-3 infos">
                        <div class="col-xl-1  col-md-1 imgzone">
                          <img *ngIf="listzone.length != 0 && fiche.zonedesservies.etatvalidation == true" src="./assets/Fiche/icon_zone.svg">
                          <img *ngIf="listzone.length == 0"  src="./assets/Fiche/icon-zone2.svg">
                          <img  *ngIf="fiche.zonedesservies.etatvalidation == false" src="./assets/Fiche/icon_zone_notifs.svg">


                        </div>
                        <div class="col-xl-9 col-md-9">
                          <span class="info_franchise"   [ngClass]="{'jourshashoraire' : listzone.length == 0}" style="line-height: 15px; display: grid;">
                            <b > Zones desservies</b>
                            <span style="color: #eba10f;"  *ngIf="listzone.length == 0 ">Ajouter zone desservies</span>
                          </span>
                          <div>

                            <div *ngFor="let zone of listzone ;let i = index;">
                              <span class="info_franchise"  [ngClass]="{'old_info' : zone.etatvalidation == false}">  {{zone.description}} </span>
                            </div>
                          </div>


                        </div>
                        <div *ngIf="role_id != 3 " class="col-xl-2 col-md-2" (click)="ModifContentInfos(contentInfos , 'ZonesDesservies' )">
                          <i class="fa fa-pencil-alt"></i>
                        </div>
                      </div>

                      <div class="row  mt-3 infos" [ngClass]="{'singleClass' : etatsm ==false}">
                        <div class="col-xl-1 col-md-1">
                          <img *ngIf="etatsm ==true && fiche.horaire.etatvalidation == true" src="./assets/Fiche/horaires.svg">
                          <img *ngIf="etatsm ==false" src="./assets/Fiche/horaireN.svg">
                          <img *ngIf="fiche.horaire.etatvalidation == false" style="width: 216px;" src="./assets/Fiche/horaires_notifs.svg">
                        </div>
                        <div class="col-xl-9 col-md-9 ">
                          <div class="row" *ngFor="let item of horaires">
                            <div class="col-xl-6">
                              <span class="info_franchise" [ngClass]="{'jourshashoraire' : etatsm ==false , old_info :item.etatvalidation == false}">
                                {{item.jours}} </span>
                            </div>
                            <div class="col-xl-6" *ngIf=" etatsm ==true">
                              <div >
                                <div *ngFor="let items of item.horaire ;first as isFirst">
                                  <div class="info_franchise" *ngIf="items.heurdebut != '' && items.heurfin != '' ">
                                    <span  [ngClass]="{'jourshashoraire' : etatsm ==false , old_info :item.etatvalidation == false}" >
                                      {{items.heurdebut}} - {{items.heurfin}}</span> <br>

                                  </div>
                                </div>
                              </div>
                              <div class="info_franchise" *ngIf="item.etat === '' ">
                                <span>Fermé</span>
                              </div>
                            </div>
                          </div>
                        </div>
                        <div *ngIf="role_id != 3 " class="col-xl-2 col-md-2" (click)="ModifContentInfos(contentInfos , 'horaires' )">
                          <i class="fa fa-pencil-alt"></i>
                        </div>
                      </div>
                      <div class="row  mt-3 infos">
                        <div class="col-xl-1 col-md-1">
                          <img *ngIf="horairessupp.length != 0 && fiche.horairesupp.etatvalidation == true" src="./assets/Fiche/icon_calandar.svg">
                          <img *ngIf="horairessupp.length == 0" src="./assets/Fiche/icon_calandar_vide.svg">
                          <img  *ngIf="fiche.horairesupp.etatvalidation == false" src="./assets/Fiche/icon_calandar_notifs.svg">

                        </div>
                        <div class="col-xl-9 col-md-9">
                          <span class="info_franchise" style="line-height: 15px; display: grid;" [ngClass]="{'jourshashoraire' : horairessupp.length == 0}"> <b> Horaires supplémentaires </b>
                            <span *ngIf="horairessupp.length == 0" style="color: #eba10f;">  Ajouter des horaires</span>
                           </span>
                           <!-- <div class="row" *ngFor="let item of horairessupp">
                            <div class="col-xl-12">
                            <div class="info_franchise d" [ngClass]="{'old_info' : item.etatvalidation == false}">
                              {{item.displayName}}


                            </div>
                          </div>
                            <div class="col-xl-6">

                              <div    *ngFor="let item of horairessuppFranchisesJour" class="info_franchise" [ngClass]="{'old_info' : item.etatvalidation == false}">
                              <span  *ngIf="item.etat == 'true'"> {{item.jours}} </span>


                              </div>
                            </div>
                            <div class="col-xl-6" >
                              <div *ngIf="item.etat != ''">
                                <div *ngFor="let items of horairessuppFranchises">
                                  <div class="info_franchise" *ngIf="items.heurdebut != '' && items.heurfin != '' ">
                                    <span  [ngClass]="{'old_info' : item.etatvalidation == false}">{{items.heurdebut}} - {{items.heurfin}}</span> <br>

                                  </div>
                                </div>
                              </div>
                              <div class="info_franchise" *ngIf="item.etat === '' ">
                                <span>Fermé</span>
                              </div>
                            </div>
                          </div>
                         -->
                         <table class="table align-items-center table-flush table-horaire tableau-bord">
                          <tbody *ngFor="let item of horairessupp">
                            <tr >
                              <td scope="row" class="title_service d">
                                {{item.displayName}}
                              </td>
                            </tr >
                          <tr  scope="row" >
                              <div  *ngFor="let items of item.horaire">
                                <td    class="title_service jours" *ngIf="items.etat == 'true'">
                                  {{items.jours}}
                                </td>
                                <td  class="title_service" *ngIf="items.etat == 'true'">
                                  <div  *ngFor="let items2 of items.horaire" >
                                    <span  class="title_service hours">
                                      {{items2.heurdebut}} - {{items2.heurfin}}
                                    </span>
                                  </div>
                                </td>
                              </div>

                            </tr>

                          </tbody>
                        </table>












                        </div>
                         <div  *ngIf="role_id != 3 " class="col-xl-2 col-md-2"
                          (click)="ModifContentInfos(contentInfos , 'horairesSupp' ) ; get_Categorie()">
                          <i class="fa fa-pencil-alt"></i>
                        </div>
                      </div>
                      <div class="row mt-3 infos">
                        <div class="col-xl-1 col-md-1">
                          <img *ngIf="horairexceptionnels.length != 0 && fiche.horairexceptionnels.etatvalidation == true" src="./assets/Fiche/icon_calandar.svg">
                          <img *ngIf="horairexceptionnels.length == 0" src="./assets/Fiche/icon_calandar_vide.svg">
                          <img  *ngIf="fiche.horairexceptionnels.etatvalidation == false" src="./assets/Fiche/icon_calandar_notifs.svg">

                        </div>

                        <div class="col-xl-9 col-md-9 ">
                          <span class="info_franchise" style="line-height: 15px; display: grid;" [ngClass]="{'jourshashoraire' : horairexceptionnels.length == 0}"> <b> Ajouter des horaires spéciaux </b>
                            <span *ngIf="horairexceptionnels.length == 0" style="color: #eba10f;">  Ajouter des horaires</span>
                           </span>
                          <div class="row" *ngFor="let item of horairexceptionnels">
                            <div class="col-xl-6">
                              <span class="info_franchise " [ngClass]="{'old_info' : item.etatvalidation == false}">
                                {{item.date}} </span>
                            </div>
                            <div class="col-xl-6" >
                              <div *ngIf="item.etat != ''">
                                <div *ngFor="let items of item.horaire">
                                  <div class="info_franchise date" *ngIf="items.heurdebut != '' && items.heurfin != '' ">
                                    <span  [ngClass]="{'old_info' : item.etatvalidation == false}">{{items.heurdebut}} - {{items.heurfin}}</span> <br>

                                  </div>
                                </div>
                              </div>
                              <div class="info_franchise" *ngIf="item.etat == '' ">
                                <span>Fermé</span>
                              </div>
                            </div>
                          </div>

                        </div>
                        <div class="col-xl-2 col-md-2" *ngIf="role_id != 3 "  (click)="ModifContentInfos(contentInfos , 'horairexceptionnels' ) ; get_Categorie()">
                          <i class="fa fa-pencil-alt"></i>
                        </div>

                      </div>
                      <div class="row mt-3 infos">
                        <div class="col-xl-1 col-md-1">
                          <img *ngIf="fiche.numerotel.etatvalidation == true && telephone.length != 0"  src="./assets/Fiche/icon_phone.svg">
                          <img *ngIf="fiche.numerotel.etatvalidation == true && telephone.length == 0"  src="./assets/Fiche/icon_phone2.svg">
                          <img *ngIf="fiche.numerotel.etatvalidation == false" src="./assets/Fiche/icon_phone_notifs.svg">
                        </div>
                        <div class="col-xl-9 col-md-9">
                          <div class="info_franchise">
                            <span *ngFor="let tel of telephone">
                              <div   [ngClass]="{'old_info' : tel.phone.etatvalidation == false}"> {{tel.phone.number}}</div>

                            </span>
                          </div>
                        </div>
                        <div  *ngIf="role_id != 3 " class="col-xl-2 col-md-2 " (click)="ModifContentInfos(contentInfos , 'telephone')">
                          <i class="fa fa-pencil-alt"></i>
                        </div>
                      </div>
                      <div class="row mt-3 infos info_franchise">
                        <div class="col-xl-1 col-md-1">
                          <img *ngIf="fiche.email.email != null && fiche.email.etatvalidation == true" src="./assets/Fiche/icon_mail.svg">
                          <img  *ngIf="fiche.email.email == null" src="./assets/Dashboard/not_icon_mail.svg">
                          <img  *ngIf="fiche.email.email != null && fiche.email.etatvalidation == false" src="./assets/Fiche/icon_mail_notifs.svg">

                        </div>

                        <div class="col-xl-9 col-md-9  info_franchise" >
                          <span *ngIf="fiche.email.email == null"  class="info_franchise jourshashoraire">Ajouter un email</span>
                          <span class="info_franchise" [ngClass]="{'old_info' : fiche.email.etatvalidation == false}">{{fiche.email.email}}</span>

                        </div>
                        <div  *ngIf="role_id != 3 " class="col-xl-2 col-md-2 " (click)="ModifContentInfos(contentInfos , 'mail' )">
                          <i class="fa fa-pencil-alt"></i>
                        </div>

                      </div>
                      <div class="row mt-3 infos">
                        <div class="col-xl-1 col-md-1">
                          <img *ngIf="fiche.urlsite.urlsite != null && fiche.urlsite.etatvalidation == true" src="./assets/Fiche/icon_public.svg">
                          <img *ngIf="fiche.urlsite.urlsite == null" src="./assets/Fiche/icon_public2.svg">
                          <img *ngIf="fiche.urlsite.etatvalidation == false && fiche.urlsite.urlsite != null" src="./assets/Fiche/icon_public_notifs.svg">
                        </div>
                        <div class="col-xl-9 col-md-9 ">
                          <span class="info_franchise">
                            <span *ngIf="fiche.urlsite.urlsite == null" style="color: #eba10f;"> Ajouter un site Web </span>
                            <span *ngIf="fiche.urlsite.urlsite != null" [ngClass]="{'old_info' : fiche.urlsite.etatvalidation == false}"> {{fiche.urlsite.urlsite}}</span>

                          </span>
                        </div>
                        <div class="col-xl-2 col-md-2 " *ngIf="role_id != 3 " (click)="ModifContentInfos(contentInfos , 'usrsite')">
                          <i class="fa fa-pencil-alt"></i>
                        </div>
                      </div>
                      <div class="row  mt-3 infos">
                        <div class="col-xl-1 col-md-1">
                          <img src="./assets/Fiche/icon_link.svg">
                        </div>
                        <div class="col-xl-9 col-md-9">
                          <span class="info_franchise" style="line-height: 15px; display: grid;"> <b> Liens vers le menu </b> Ajouter un lien</span>
                        </div>
                        <div class="col-xl-2 col-md-2 " *ngIf="role_id != 3 " >
                          <i class="fa fa-pencil-alt"></i>
                        </div>
                      </div>
                      <div class="row  mt-3 infos">
                        <div class="col-xl-1 col-md-1">
                          <img src="./assets/Fiche/icon_link.svg" *ngIf="fiche.rendezvous.urlValues != '' ">
                          <img src="./assets/Fiche/icon_link2.svg" *ngIf="fiche.rendezvous.urlValues == '' ">
                        </div>
                        <div class="col-xl-9 col-md-9">
                          <span class="info_franchise"  style="line-height: 15px; display: grid;" [ngClass]="{'jourshashoraire' : fiche.rendezvous.urlValues == ''}"> <b>
                             Liens pour prendre rendez-vous </b>

                             <span *ngIf="fiche.rendezvous.urlValues == '' " style="color: #eba10f;" >Ajouter un lien </span>

                          <span *ngIf="fiche.rendezvous.urlValues != '' " class="mt-2" [ngClass]="{'old_info' : fiche.rendezvous.etatvalidation == false}"> {{fiche.rendezvous.urlValues}}</span>

                        </span>

                        </div>
                        <div  *ngIf="role_id != 3 " class="col-xl-2 col-md-2 " (click)="ModifContentInfos(contentInfos , 'lienrdv')">
                          <i class="fa fa-pencil-alt"></i>
                        </div>
                      </div>
                      <div class="row  mt-3 infos" [ngClass]="{'jourshashoraire' : productlength == 0}">
                        <div class="col-xl-1 col-md-1">
                          <img *ngIf="productlength != 0" src="./assets/Fiche/icon_shopping.svg">
                          <img *ngIf="productlength == 0" src="./assets/Fiche/icon_shopping2.svg">
                        </div>
                        <div class="col-xl-9 col-md-9">
                          <span class="info_franchise" style="line-height: 15px; display: grid;"> <b> Produits </b> Ajouter ou modifier des produits</span>
                        </div>
                        <div  *ngIf="role_id != 3 " class="col-xl-2 col-md-2 " (click)="Modifproduitsfiche(contentInfos , 'Addproduct')">
                          <i class="fa fa-pencil-alt"></i>
                        </div>
                      </div>
                      <div class="row  mt-3 infos"  [ngClass]="{'jourshashoraire' :   lengthtotal == 0}">
                        <div class="col-xl-1 col-md-1">
                          <img  *ngIf="lengthtotal != 0 && fiche.services.etatvalidation == true" src="./assets/Fiche/icon_list.svg">
                          <img *ngIf="lengthtotal == 0"  src="./assets/Fiche/icon_list_vide.svg">
                          <img *ngIf="fiche.services.etatvalidation == false"  src="./assets/Fiche/icon_list_notifs.svg">

                        </div>
                        <div class="col-xl-9 col-md-9">
                          <span class="info_franchise" style="line-height: 15px; display: grid;"> <b> Services </b>
                            <span *ngIf="lengthtotal == 0"> Ajouter un service</span>
                            <div *ngFor="let item of Listservices ;let i = index;">
                              <div *ngFor="let service of item.Services ;let i = index;">
                                <span class="info_franchise" *ngIf="item.type == 'primaryCategory'">
                                  <span [ngClass]="{'old_info' : service.etatvalidation == false}"> <b> {{service.name}}</b></span>  <br>
                               </span>
                                <span class="info_franchise ss"  *ngIf="item.type == 'additionalCategories'">
                                  <span [ngClass]="{'info_sups ' : service.etatvalidation == false}">  {{service.name}}   </span>
                                  </span>
                                </div>
                            </div>
                          </span>
                        </div>
                        <div *ngIf="role_id != 3 " class="col-xl-2 col-md-2 " (click)="ModifContentInfos(contentInfos , 'Services' )">
                          <i class="fa fa-pencil-alt"></i>
                        </div>
                      </div>
                      <div class="row  mt-3 infos"  [ngClass]="{'jourshashoraire' :   listattributes.length == 0}">
                        <div class="col-xl-1 col-md-1">
                          <img src="./assets/Fiche/icon_sell.svg" *ngIf="listattributes.length != 0 && fiche.attributes.etatvalidation == true">
                          <img src="./assets/Fiche/icon_sell2.svg" *ngIf="listattributes.length == 0 && fiche.attributes.etatvalidation == true">
                          <img src="./assets/Fiche/icon_sell_notifs.svg" *ngIf="fiche.attributes.etatvalidation == false">
                        </div>
                        <div class="col-xl-9 col-md-9">
                          <span class="info_franchise" style="line-height: 15px; display: grid;"> <b> Fournis par l'établissement </b>
                            <span *ngIf="listattributes.length == 0"> Ajouter des attributs</span></span>


                           <div *ngFor="let item of listattributes" class="mb-3">
                            <span class="info_franchise" style="line-height: 15px; display: grid;"> <b> {{item.groupDisplayName}} </b>
                            </span>

                            <div *ngFor="let service of item.Services">
                              <span  [ngClass]="{ old_info :service.etatvalidation == false}"  class="info_franchise" style="line-height: 15px; display: grid;" >
                                {{service.displayName}}
                              </span>
                            </div>
                          </div>

                        </div>
                        <div *ngIf="role_id != 3 " class="col-xl-2 col-md-2 "
                          (click)="ModifContentInfos(contentInfos , 'Attributs' ) ; getListAttributs('')">
                          <i class="fa fa-pencil-alt"></i>
                        </div>
                      </div>

                      <div class="row  mt-3 infos" [ngClass]="{'jourshashoraire' :   fiche.description.description == null}">
                        <div class="col-xl-1  col-md-1 jk g-1">
                          <img *ngIf="fiche.description.description != null && fiche.description.etatvalidation == true" src="./assets/Fiche/icon_notes.svg">
                          <img *ngIf="fiche.description.description == null" src="./assets/Fiche/icon_notes_vide.svg">
                          <img *ngIf="fiche.description.etatvalidation == false" src="./assets/Fiche/icon_notes_notifs.svg">

                        </div>
                        <div class="col-xl-9 col-md-9">
                          <span class="info_franchise" style="line-height: 15px; display: grid; margin-top: 5px;">
                            <span *ngIf="fiche.description.description == null" style="color: #eba10f; "> Ajouter une description</span>
                            <span [ngClass]="{'old_info' : fiche.description.etatvalidation == false}">{{fiche.description.description}} </span>

                          </span>
                        </div>
                        <div *ngIf="role_id != 3 " class="col-xl-2 col-md-2" (click)="ModifContentInfos(contentInfos , 'description' )">
                          <i class="fa fa-pencil-alt"></i>
                        </div>
                      </div>
                      <div class="row  mt-3 infos">
                        <div class="col-xl-1 col-md-1">
                          <img src="./assets/Fiche/icon_calandar.svg" *ngIf="(fiche.ouverture.ouverture != null || fiche.ouverture.ouverture != '') && fiche.ouverture.etatvalidation == true ">
                          <img src="./assets/Fiche/icon_calandar2.svg" *ngIf="fiche.ouverture.ouverture == null || fiche.ouverture.ouverture == '' ">
                          <img src="./assets/Fiche/icon_calandar_notifs.svg" *ngIf="fiche.ouverture.etatvalidation == false">
                        </div>
                        <div class="col-xl-9 col-md-9">
                          <span *ngIf="fiche.ouverture.ouverture == null || fiche.ouverture.ouverture == '' ">Ajouter date d'ouverture</span>
                          <span class="info_franchise"  [ngClass]="{'old_info' : fiche.ouverture.etatvalidation == false}"> Ouverture le {{fiche.ouverture.ouverture}} </span>

                        </div>
                        <div *ngIf="role_id != 3 " class="col-xl-2 col-md-2 " (click)="ModifContentInfos(contentInfos , 'Ouverture' )">
                          <i class="fa fa-pencil-alt"></i>
                        </div>
                      </div>
                      <div class="row  mt-3 infos">
                        <div class="col-xl-1 col-md-1">
                          <img src="./assets/Fiche/picto-img-plus.svg">
                        </div>
                        <div class="col-xl-9 col-md-9">
                          <span class="info_franchise photos" (click)="AddPhotos(contentP)"> Ajouter des photos</span>
                        </div>
                        <div *ngIf="role_id != 3 " class="col-xl-2 col-md-2">
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="col-xl-4  col-md-5 view_fiche" *ngFor="let fiche of detailsfiche" >
                  <div class="media  one-etiquette align-items-center" (click)="somefunction(fichindividuel)">
                    <div class="media-body ml-2 d-none d-xl-block">
                      <span class="mb-0 text-right d-xl-block view-franchise">Voir la fiche dans <br> le tableau de bord</span>
                    </div>


                    <span class="avatar post avatar-sm rounded-circle">  <img src=" ./assets/Dashboard/voir-fiche-detaille.svg"></span>
                  </div>

                  <div *ngIf="statusfiches == 'CLOSED_TEMPORARILY'" class="bloc-fermeture mt-3">
                    <div class="bloc-ferm">
                    </div>
                    <div class="tempo">
                      <p class="mt-3 mb-3"> <i class="fa fa-exclamation-triangle"></i> Fermé temporairement  </p>
                      <span class="delete_etab"> Cet établissement a été marqué comme temporairement fermé.</span>
                    </div>
                  </div>

                  <div *ngIf="statusfiches == 'CLOSED_PERMANENTLY'" class="bloc-fermeture mt-3">
                    <div class="bloc-ferm">
                    </div>
                    <div class="tempo">
                      <p class="mt-3 mb-3"> <i class="fa fa-exclamation-triangle"></i> Fermé définitivement  </p>
                      <span class="delete_etab"> Cet établissement a été marqué comme fermé définitivement.</span>
                    </div>
                  </div>


                  <p class="mt-3 mb-3">Votre établissement est visible sur Google</p>
                  <div class="infos_google">
                    <a href="{{google}}" target="_blank"> <img src="./assets/Dashboard/picto-google-map.svg"
                        class="show-fiche"> Afficher dans la recherche Google</a>
                    <a href="{{maps}}" target="_blank"> <img src="./assets/Dashboard/picto-google-serp.svg"
                        class="show-fiche"> Afficher dans Google Maps</a>
                    <a [routerLink]="['/franchises']"> <img src="./assets/Fiche/icon_share.svg" class="share-fiche">
                      Partager le profil de votre établissement</a>
                    <hr>

                    <div *ngIf="fiche.statusfiches == 'OPEN'">
                      <p class="mt-3 mb-3">Fermer cet établissement sur Google<!--  <i class="fa fa-angle-up"></i> --> </p>
                      <span class="dec_etab">Vous pouvez marquer cet établissement comme fermé temporaiirement ou
                        définitivement. Vous pouvez également le supprimer de votre compte.</span>

                      <button   class="fermer_etab mt-4"
                      (click)="openfermeture(contentfermeture , 'temporairement')" >Marque comme fermé temporairement</button>
                      <button class="fermer_etab"  (click)="openfermeture(contentfermeture , 'definitivement')" >Marque comme fermé définitivement</button>
                    </div>



                    <div *ngIf="fiche.statusfiches == 'CLOSED_TEMPORARILY'">
                      <p class="mt-3 mb-3">Rouvrir cet établissement sur Google <i class="fa fa-angle-up"></i> </p>
                         <span class="delete_etab"> Vous pouvez également le supprimer de votre compte.</span>
                      <button class="fermer_etab mt-4" (click)="openetablissement()" >Marque l'établissement comme ouvert</button>
                    </div>


                    <div *ngIf="fiche.statusfiches == 'CLOSED_PERMANENTLY'">
                      <p class="mt-3 mb-3">Rouvrir cet établissement sur Google <i class="fa fa-angle-up"></i> </p>
                         <span class="delete_etab"> Marquer cet établissement comme ouvert pour améliorer sa visibilité dans la recherche Goole maps.
                           Vous pouvez également le supprimer de votre compte.</span>
                      <button class="fermer_etab mt-4" (click)="openetablissement()" >Marque l'établissement comme ouvert</button>
                    </div>


                    <hr>


                    <p class="mt-3 mb-3">Informations avancées </p>
                    <div class="row  mt-2 infos">
                      <div class="col-xl-5 col-md-5">
                        <span class="info_title"> Code de magasin</span>
                      </div>
                      <div class="col-xl-5 col-md-5">
                        <span class="info_franchise" *ngIf="fiche.codemagasin.codemagasin != null"> {{fiche.codemagasin.codemagasin}}</span> <br>


                      </div>
                      <div  *ngIf="role_id != 3 " class="col-xl-2 col-md-2" (click)="ModifContentInfos(contentInfos , 'Code' )">
                        <i class="fa fa-pencil-alt"></i>
                      </div>
                    </div>
                    <div class="row  mt-2 infos">
                      <div class="col-xl-5 col-md-5">
                        <span class="info_title"> Libellés</span>
                      </div>
                      <div class="col-xl-5 col-md-5">
                        <span class="info_franchise" *ngFor="let libelle of listlibelle ">
                           <span *ngIf="listlibelle.length == 0" >Saisissez des libellés  </span>
                           <div> {{libelle.libelle_value}}</div>

                        </span>
                      </div>
                      <div *ngIf="role_id != 3 " class="col-xl-2 col-md-2" (click)="ModifContentInfos(contentInfos , 'Libelles' )">
                        <i class="fa fa-pencil-alt"></i>
                      </div>
                    </div>
                    <div class="row  mt-2 infos">
                      <div class="col-xl-5 col-md-5">
                        <span class="info_title" style="line-height: 16px;
                        display: grid;"> Numéro de télephone pour les extensions de lieu Google Ads</span>
                      </div>
                      <div class="col-xl-5 col-md-5">
                        <span class="info_franchise"> {{adwPhone}} </span>
                      </div>
                      <div  *ngIf="role_id != 3 " class="col-xl-2 col-md-2" (click)="ModifContentInfos(contentInfos , 'Numero')">
                        <i class="fa fa-pencil-alt"></i>
                      </div>
                    </div>

                   <div >
                    <hr>
                    <p class="mt-3 mb-3" >Étiquette de personnalisation </p>
                    <div class="listgroupe" *ngFor="let items of listGroupe , let i = index;">
                      <fieldset class="scheduler-border mb-">
                        <legend class="scheduler-border text-general">
                          <div style="width: auto; padding:0%, 4%;">
                            <label class="form-check-label mr-2" for="flexCheckDefault">
                              {{items.Name_groupe}}
                            </label>
                          </div>
                        </legend>
                        <div class="reviews-members  pb-2">
                          <div class="listlocalisations">
                            <div class="groupefiche"
                              *ngFor="let item of items.ettiquettes , let Index_Etiquette = index;">
                              <div *ngIf="item.status == true" class="fichelocalisation"
                                style="padding: 7px 4px 6px 1px"
                                [ngStyle]="{'background-color':items.couleur_groupe , 'border-color':items.couleur_groupe} ">
                                <span class="valueetiquette my_value" [ngStyle]="{'color':items.couleur_groupe} ">
                                  {{item.Value_etiquette}}</span>
                                <span> {{item.Nom_etiquette}} </span>
                                <span (click)="deleteEtiquette(items.id_groupe ,item.etiquettegroupe)" *ngIf="role_id != 3">
                                  <i class="fa fa-times"></i> </span>
                              </div>
                            </div>
                          </div>
                          <span (click)="open(content3 ,items.Name_groupe , items )" *ngIf="role_id != 3">
                            Ajouter des étiquettes de personnalisation
                          </span>
                        </div>
                      </fieldset>
                    </div>


                  </div>

                    <div *ngIf="role_id != 3 ">
                      <hr>

                    <p class="mt-3 mb-3"> Gérer les utilisateurs </p>
                    <button class="add_user mt-2 mb-2" (click)="openpopupadduser(contentadduser)"
                      [ngStyle]="{'background-color':Ajoutuser=== true ? '#0081C7' : '#fff'  ,  'color':Ajoutuser=== true ? '#fff' : '#0081C7'}">
                      Ajouter des utilisateurs</button>

                    <div class="listusers">
                      <div class="list_users" *ngFor="let user of listusers">
                        <div class="row mt-4 mb-4">
                          <div class="col-xl-2 col-md-2">
                            <img  *ngIf="user.photo == null" src="../assets/Fiche/default_user.png">
                            <img  *ngIf="user.photo != null" class="photo-profil"   src= "{{user.photo}}">


                          </div>
                          <div class="col-xl-3  col-md-3 pl-0 mt-2">
                            <span class="type_user"  [ngStyle]="{'width':user.pendingInvitation === 1 ? '85px' : '85px'  ,  'width':user.pendingInvitation === 0 ? '100%' : '85px'}"> {{user.firstname}}</span>
                          </div>
                          <div class="col-xl-2  col-md-2 pl-0 pr-0 mt-2">
                            <span class="type_user" style="color: #cc0070;" *ngIf="user.pendingInvitation == 1"> Invitation</span>
                          </div>
                          <div class="col-xl-4 pl-0 pr-0 mt-2">
                            <div  >
                               <ng-select  [items]="TypeUsers" [(ngModel)]=user.type bindLabel="name"
                            [readonly]= "user.pendingInvitation"
                              value="user.type" [placeholder]="placeholder"
                              (change)="Modifproprietaire($event ,user )"  >
                            </ng-select>
                            </div>

                          </div>
                          <div class="col-xl-1   col-md-1 pr-0 mt-2" (click)="Opensuppression(contentsupp , user , '')">
                            <i class="fa fa-times" ></i>
                          </div>
                        </div>
                      </div>
                    </div>
                    <button class="supp_profil mb-4" (click)="Opensuppression(contentsupp ,'' , 'DissocierFiche')"> Dissocier du profil</button>

                  </div>
                 </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="" [ngClass]="{'col-xl-1  col-md-1 ':    isMobile === true , 'col-xl-3  col-md-3': isMobile === false}">
      <div *ngIf="!isMobile">
        <app-sidebar-franchises></app-sidebar-franchises>
        <app-sidebar-general></app-sidebar-general>
      </div>
      <div *ngIf="isMobile" class="medium_screen text-center">
        <span class="avatar avatar-md rounded-circle"
        (click)="openblock(contentblock)">
          <img  src="../assets/Dashboard/icon-franchises1.png"><sup class="sup-b"><i  class="fa fa-circle mod"></i></sup>
      </span>

      </div>
      <div id="contentblock">
        <ng-template #contentblock let-modal>

          <button type="button" class="close avatar" aria-label="Close"
          (click)="fermerpro()">
         <i class="fa fa-times-thin fa-2x cross" aria-hidden="true"></i>
          </button>

          <div class="modal-body listprofil pb-0 mb-0">
            <app-sidebar-franchises></app-sidebar-franchises>
            <app-sidebar-general></app-sidebar-general>
          </div>
        </ng-template>
      </div>

      </div>
  </div>

  <div id="notifs-client">
    <ng-template #content3 let-modal>
      <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
        <span aria-hidden="true">&times;</span>
      </button>
      <div class="modal-body">
        <p class="infos-posts"> Séléctionner des fiches</p>
        <div class="form-group mb-4 titlepost listetiquette">
          <div class="listlocalisationsGroupe">
            <div class="groupefiche" *ngFor="let fiche of etiquetteselected.ettiquettes , let Index_Etiquette = index;">

              <div  class="ficheselectionnees"
                (click)="selectionnerfiche(etiquetteselected,fiche) "
                [ngStyle]="{ 'background-color':fiche.status=== false ? '#fff' : etiquetteselected.couleur_groupe ,
                'border-color':fiche.status=== true ? '#fff' : etiquetteselected.couleur_groupe  ,
                'color':fiche.status=== true ? '#fff' : etiquetteselected.couleur_groupe }">
                <span class="valueetiquette"

                [ngStyle]="{'color':etiquetteselected.couleur_groupe , 'border-color':etiquetteselected.couleur_groupe}">
                  {{fiche.Value_etiquette}}

                </span>
                <span class="ml-2 mr-2"> {{fiche.Nom_etiquette}} </span>
              </div>
            </div>
          </div>
        </div>
        <div class="modal-footer mt-5 text-right" >
          <button type="button" class="btn btn-annulation " (click)="FermerAdd()">Annuler</button>
          <button type="submit" class="btn btn-pub ml-0" (click)="selectfiche()">Appliquer</button>

        </div>
      </div>
      <div class="modal-footer mt0 pb-0" style="top: 42%;">
       <div style="background: url(./assets/Dashboard/bg-footer.png); background-size: 100% 100%; height: 87px;"></div>
      </div>
    </ng-template>
  </div>

  <div id="notifs-client">
    <ng-template #contentP let-modal>
      <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
        <span aria-hidden="true">&times;</span>
      </button>
      <div class="modal-body ContenuPhoto">
        <p class="title-fiche text-center text-general"> Importer une photo</p>
        <!-- Form starts -->
        <form [formGroup]="AddPhotoForm" (ngSubmit)="onSubmit()">
          <div class="custom-dropzone" ngx-dropzone [accept]="'image/*'" (change)="onSelect($event)">
            <ngx-dropzone-label>
              <div class="add_img row">

                <div class="col-xl-2 col-md-2 " style="    text-align: right;">
                  <img src="./assets/Fiche/picto-img-plus.svg" style="width: 61%;">
                </div>
                <div class="col-xl-8" style="    float: left;
                text-align: left;">
                  <h2>Importer votre photo</h2>
                </div>
                <div class="col-xl-1 col-md-1">
                  <i class="fa fa-download"></i>
                </div>
              </div>
            </ngx-dropzone-label>
            <ngx-dropzone-image-preview ngProjectAs="ngx-dropzone-preview" *ngFor="let f of files_dropped"
              formControlName="file" [file]="f" [multiple]="false" [removable]="true" (removed)="onRemove(f)">
            </ngx-dropzone-image-preview>
          </div>

          <div>
            <ul>
              <li class="list-group-item" *ngFor="let item of checklist">
                <input type="checkbox" value="{{item.id}}" formControlName="category"
                  name="category"  (change) ="isAllSelected(item)"/>
                <span class="itemList">{{item.value}} </span>
              </li>
            </ul>
          </div>
          <span class="nom-fiche"> Type de photo</span>
          <ng-select [items]="TypePhotos" [(ngModel)]='setSelected' bindLabel="name"
            [placeholder]="placeholder"  formControlName="type_photo">
          </ng-select>
          <div class="btncnx mt-3">

            <button type="submit" class="btn btn-pub">Publier</button>
            <button type="button" class="btn btn-annulation" (click)="FermerAdd()">Annuler</button>
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <div style="background: url(./assets/Dashboard/bg-footer.png); background-size: 100% 100%; height: 87px;"></div>
      </div>

    </ng-template>
  </div>
  <!------Modification locationName de fiche-->

  <div id="notifs-client">
    <ng-template #contentInfos let-modal>
      <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
        <span aria-hidden="true">&times;</span>
      </button>
      <!-------------Nom de fiche---------->
      <div class="modal-body modifEtablissement" *ngIf="TypeModif == 'Nom'">
        <span class="title_modifE  mb-4 text-general"> Nom de l'établissement</span>
        <!-- Form starts -->
          <div class="form-group mb-4 titlepost" *ngFor="let fiche of detailsfiche">
            <span class="nom-fiche mb-3"> Indiquez le nom public de l'établissement </span>
            <div class="input-group input-group-alternative"  >
              <input class="form-control" [(ngModel)]="locationName" placeholder="Biforbiz" type="text"
              [ngClass]="{'old_info' : fiche.locationName.etatvalidation == false}"
                name="locationName">
            </div>
          </div>
          <div class="btncnx">
            <div style="  display: inline-block; "> <button type="button" class="btn btn-annulation"
                (click)="FermerAdd()">Annuler</button></div>
            <div style="  display: inline-block; "> <button type="submit" (click)="ModifEtablissement(locationName)" class="btn btn-pub">Appliquer</button> </div>
          </div>
          <hr>
          <p>
            Remarque : Nous pourrons examiner vos modifications pour nous assurer de leur qualité. Un délai de trois
            jours peut s'écouler avant publication.
            <a href="https://support.google.com/business/answer/3038311?hl=fr&p=appearance_time&_ga=2.246303236.1406920858.1624523967-981338355.1624523967&visit_id=637601291401674153-398501792&rd=1"
              target="_blank">En savoir plus </a>
          </p>

      </div>
        <!-- -----------Modification lien rendez-vous-------->
        <div class="modal-body modifEtablissement" *ngIf="TypeModif == 'lienrdv'">
          <span class="title_modifE  mb-4 text-general"> Liens pour prendre rendez-vous</span>
          <!-- Form starts -->

            <div class="form-group mb-4 titlepost" *ngFor="let fiche of detailsfiche">
              <div class="input-group input-group-alternative">
                <textarea class="form-control" [(ngModel)]="lienrdv" placeholder="Liens pour prendre rendez-vous" type="text"
                   name="lienrdv"  [ngClass]="{'old_info' : fiche.rendezvous.etatvalidation == false}">
                   </textarea>
              </div>
            </div>
            <!-- Submit Button -->
            <div class="btncnx">
              <div style="  display: inline-block; "> <button type="button" class="btn btn-annulation"
                  (click)="FermerAdd()">Annuler</button></div>
              <div style="  display: inline-block; ">
                <button  class="btn btn-pub" (click)="Modiflienrdv(lienrdv)">Appliquer</button>
              </div>
            </div>
            <hr>
            <p>
              Remarque : Nous pourrons examiner vos modifications pour nous assurer de leur qualité. Un délai de trois
              jours peut s'écouler avant publication.
              <a href="https://support.google.com/business/answer/3038311?hl=fr&p=appearance_time&_ga=2.246303236.1406920858.1624523967-981338355.1624523967&visit_id=637601291401674153-398501792&rd=1"
                target="_blank">En savoir plus </a>
            </p>
        </div>

        <!-- -----------Modification usrsite-------->
        <div class="modal-body modifEtablissement" *ngIf="TypeModif == 'usrsite'">
            <span class="title_modifE  mb-4 text-general"> Site web</span>
              <div class="form-group mb-4 titlepost" *ngFor="let fiche of detailsfiche">
                <div class="input-group input-group-alternative">
                  <input class="form-control" [(ngModel)]="urlsite"
                  [ngClass]="{'old_info' : fiche.urlsite.etatvalidation == false}"
                  placeholder="https://www.cliqeo.com/" type="text"
                    name="urlsite">
                </div>
              </div>
              <div class="btncnx">
                <div style="  display: inline-block; "> <button type="button" class="btn btn-annulation"
                    (click)="FermerAdd()">Annuler</button></div>
                <div style="  display: inline-block; ">
                  <button type="submit" class="btn btn-pub"  (click)="Modifsite(urlsite)">Appliquer</button>
                </div>
              </div>
              <hr>
              <p>
                Remarque : Nous pourrons examiner vos modifications pour nous assurer de leur qualité. Un délai de trois
                jours peut s'écouler avant publication.
                <a href="https://support.google.com/business/answer/3038311?hl=fr&p=appearance_time&_ga=2.246303236.1406920858.1624523967-981338355.1624523967&visit_id=637601291401674153-398501792&rd=1"
                  target="_blank">En savoir plus </a>
              </p>

        </div>

          <!-- -----------Modification mail----------->
      <div class="modal-body modifEtablissement libelles" *ngIf="TypeModif == 'mail'">
        <span class="title_modifE  mb-4 text-general">Nom de profil court</span>
        <!-- Form starts -->
        <p>
          La modification n'est plus possible. Vous pouvez supprimer le nom court de votre fiche, mais vous ne pourrez
          pas en ajouter un autre
          <a href="https://support.google.com/business/answer/9273900?authuser=1&authuser=1&hl=fr&p=short_name&_ga=2.191694697.290213117.1629354087-547569408.1626430930&visit_id=637649774296225771-3229777569&rd=1"
            target="_blank">En savoir plus </a>
        </p>
        <div class="btncnx">
          <div style="  display: inline-block; "> <button type="button" class="btn btn-annulation"
              (click)="FermerAdd()">Annuler</button></div>
          <div style="  display: inline-block; ">
            <button type="submit" class="btn btn-pub">Supprimer</button>
          </div>
        </div>
      </div>
             <!---------------description------------->
      <div class="modal-body modifEtablissement" *ngIf="TypeModif == 'description'">
        <span class="title_modifE  mb-4 text-general"> Description fournie par l'établissement</span>
        <p> Décrivez votre établissement auprès des utilisateurs sur Google. <a
            href="https://support.google.com/business/answer/3039617?hl=fr&_ga=2.50764969.1288586239.1633935135-1743924324.1633071322#description&zippy=%2Cde-l%C3%A9tablissement"
            target="_blank">En savoir plus </a></p>
        <!-- Form starts -->

          <div class="form-group mb-4 titlepost" *ngFor="let fiche of detailsfiche">
            <div class="input-group input-group-alternative">
              <textarea class="form-control" #descriptions
              [(ngModel)]="description" type="textarea" [ngClass]="{'old_info' : fiche.description.etatvalidation == false}"
                name="description" ></textarea>
            </div>

            <span class="lenghtname"> {{descriptions.length}} /750</span>
          </div>
          <!-- Submit Button -->
          <div class="btncnx">
            <div style="  display: inline-block; "> <button type="button" class="btn btn-annulation"
                (click)="FermerAdd()">Annuler</button></div>
            <div style="  display: inline-block; ">
              <button type="submit" class="btn btn-pub" (click)="Modifdescription(description)">Appliquer</button>
            </div>

          </div>

          <hr>

          <p>
            Les modifications seront peut-être examinées. Un délai de trois jours peut être nécessaire avant que votre
            modification ne s'affiche dans la recherche, sur Maps et dans d'autres services Google.
            <a href="https://support.google.com/business/answer/3038311?hl=fr&p=appearance_time&_ga=2.112569348.1288586239.1633935135-1743924324.1633071322&visit_id=637696221079305424-390478826&rd=1"
              target="_blank">En savoir plus </a>
          </p>




      </div>

        <!-- -----------Modification code magasin----------->
        <div class="modal-body modifEtablissement libelles" *ngIf="TypeModif == 'Code'">
          <span class="title_modifE  mb-4 text-general">Code de magasin</span>
            <p>
              Un code de magasin est un identifiant unique associé à chaque établissement de votre compte. Celui-ci est
              visible par tous les utilisateurs qui gèrent l'établissement sur Google.
              <a href="https://support.google.com/business/answer/3370250?hl=fr&_ga=2.119225481.1073041230.1624874631-14365650.1624874631#storecode"
                target="_blank">En savoir plus </a>
            </p>
            <div class="input-group input-group-alternative mt-3" *ngFor="let fiche of detailsfiche">
              <input class="form-control" placeholder="Code de magasin" type="text"
                [ngClass]="{'old_info' : fiche.codemagasin.etatvalidation == false}"
                [(ngModel)]="codemagasin" name="storeCode" style="border-radius: initial;">
            </div>
            <div class="btncnx">
              <div style="  display: inline-block; "> <button type="button" class="btn btn-annulation"
                  (click)="FermerAdd()">Annuler</button></div>
              <div style="  display: inline-block; ">
                <button type="submit" class="btn btn-pub" (click)="ModifCode(codemagasin)" >Appliquer</button>
              </div>
            </div>
        </div>
         <!-- -----------Modification numero de telephone-------->
      <div class="modal-body modifEtablissement" *ngIf="TypeModif == 'telephone'">
        <span class="title_modifE  mb-4 text-general"> Numéro de téléphone</span>
        <form [formGroup]="ModifNumeroForm" (ngSubmit)="ModifNumEtablissement()">
          <div class="form-group mb-4 titlepost modifphone" formArrayName="numerotel">
            <div class="mb-3" *ngFor="let num of ModifNumeroForm.controls['numerotel']['controls']; let i=index">
              <div class="numfiche mb-3 " [formGroupName]="i">
                <span *ngIf="i == 0" class="nom-fiche mb-3" style="display: block;"> Numéro principal</span>

                <span *ngIf="i > 0" class="nom-fiche mb-3" style="display: block;"> Numéro de téléphone
                  supplémentaires</span>
                <ngx-intl-tel-input [enablePlaceholder]="false" [preferredCountries]="preferredCountries"
                  [enableAutoCountrySelect]="false" [searchCountryFlag]="true"
                  [ngClass]="{'old_info' : num.value.etatvalidation == false}"
                  [searchCountryField]="[SearchCountryField.fr, SearchCountryField.Name]" [selectFirstCountry]="true"
                  [selectedCountryISO]="CountryISO.France" [maxLength]="15" [phoneValidation]="true"
                  [separateDialCode]="separateDialCode" name="phone" formControlName="phone">
                </ngx-intl-tel-input>
                <div *ngIf="i > 0" (click)="removeBloc(i,bloc_id)" class="btn-sm btn  m-btn m-btn--icon m-btn--pill"
                  data-repeater-delete="">
                  <span>
                    <i aria-hidden="true" class="fa fa-times"></i>
                  </span>
                </div>
              </div>
            </div>

            <span *ngIf="ModifNumeroForm.controls['numerotel']['controls'].length <= 2" class="addNum mt-3 "
              style="display: block;" (click)="addNumero()"> Ajouter numéro</span>

          </div>
          <div class="btncnx">
            <div style="  display: inline-block; "> <button type="button" class="btn btn-annulation"
                (click)="FermerAdd()">Annuler</button></div>
            <div style="  display: inline-block; "> <button type="submit" class="btn btn-pub">Appliquer</button> </div>
          </div>
          <hr>
          <p>
            Les modifications seront peut-être examinées. Un délai de trois jours peut être nécessaire avant que votre
            modification ne s'affiche dans la recherche, sur Maps et dans d'autres services Google.
            <a href="https://support.google.com/business/answer/3038311?authuser=1&authuser=1&hl=fr&p=appearance_time&_ga=2.179832679.290213117.1629354087-547569408.1626430930&visit_id=637649548195526808-4030685438&rd=1"
              target="_blank">En savoir plus </a>
          </p>
        </form>
      </div>
      <!-- -----------Modification numero de telephone-------->
      <div class="modal-body modifEtablissement" *ngIf="TypeModif == 'Numero'">
        <span class="title_modifE  mb-4 text-general">Numéro de téléphone pour les extensions de lieu Google Ads</span>
        <!-- Form starts -->
        <form [formGroup]="ModifInfosE" (ngSubmit)="ModifAdwPhone()">
          <p>
            Ce numéro s'affiche dans les annonces avec extensions de lieu que vous diffusez à l'aide de Google Ads
            <a href="https://support.google.com/business/answer/3370250?hl=fr&_ga=2.129005324.1073041230.1624874631-14365650.1624874631#ad"
              target="_blank">En savoir plus </a>
          </p>
          <div class="form-group mb-4 titlepost modifphone">
            <div class="numfiche input-group input-group-alternative  mt-5">
              <ngx-intl-tel-input [enablePlaceholder]="false" [preferredCountries]="['fr','in']"
                [enableAutoCountrySelect]="false" [searchCountryFlag]="true"
                [searchCountryField]="[SearchCountryField.fr, SearchCountryField.Name]" [selectFirstCountry]="true"
                [selectedCountryISO]="CountryISO.fr" [(ngModel)]="adwPhone" [maxLength]="11" [phoneValidation]="true"
                [separateDialCode]="separateDialCode" name="adwPhone" formControlName="adwPhone">
              </ngx-intl-tel-input>
            </div>
          </div>
          <!-- Submit Button -->
          <div class="btncnx">
            <div style="  display: inline-block; "> <button type="button" class="btn btn-annulation"
                (click)="FermerAdd()">Annuler</button></div>
            <div style="  display: inline-block; "> <button type="submit" class="btn btn-pub">Appliquer</button> </div>
          </div>
        </form><!-- Form ends -->
      </div>
      <!-- -----------Modification libelles----------->
      <div class="modal-body modifEtablissement libelles" *ngIf="TypeModif == 'Libelles'" style="    margin-top: 14%;
      height: 423px;
      overflow: auto;">
        <span class="title_modifE  mb-4 text-general">Libellés</span>
        <!-- Form starts -->
        <form [formGroup]="ModifLibelleForm" (ngSubmit)="ModifLibelle()">
          <p>
            Organisez vos établissements en ajoutant des libellés. Toute personne qui gère un établissement sur Google
            peut voir ces libellés.
            <a href="https://support.google.com/business/answer/3370250?hl=fr&_ga=2.101276417.1073041230.1624874631-14365650.1624874631#labels"
              target="_blank">En savoir plus </a>
          </p>
          <div class="form-group mb-4 titlepost modifphone" formArrayName="listlibelle">
            <div class="mb-3" *ngFor="let num of ModifLibelleForm.controls['listlibelle']['controls']; let i=index">
              <div class="numfiche mb-5" [formGroupName]="i">
                <div class="input-group input-group-alternative mt-3">
                  <input class="form-control"  [ngClass]="{'old_info' : num.value.etatvalidation == false}"  placeholder="Libellés" type="text" formControlName="libelle_value"
                    name="libelle_value">
                  <div (click)="removeLibelle(i,libelle_id)" class="btn-sm btn  m-btn m-btn--icon m-btn--pill"
                    data-repeater-delete="">
                    <span>
                      <i aria-hidden="true" class="fa fa-times"></i>
                    </span>
                  </div>
                </div>
              </div>
            </div>
            <span class="addNum mt-3 " style="display: block;" (click)="addLibelle()"> Ajouter un libellé</span>
          </div>
          <!-- Submit Button -->
          <div class="btncnx">
            <div style="  display: inline-block; "> <button type="button" class="btn btn-annulation"
                (click)="FermerAdd()">Annuler</button></div>
            <div style="  display: inline-block; "> <button type="submit" class="btn btn-pub">Appliquer</button> </div>
          </div>
        </form><!-- Form ends -->
      </div>



        <!----------horaires------------>
        <div class="modal-body  libelles" *ngIf="TypeModif == 'horaires'">
          <span class="title_modifE  mb-4 text-general">Horaires d'ouverture</span>
          <!-- Form starts -->
          <div class="horaireE">
            <form [formGroup]="HorairesForm" (ngSubmit)="Modifhoraires()">
              <div class="m-portlet m-portlet--creative m-portlet--first m-portlet--bordered-semi">
                <div class="m-portlet__head">
                  <div class="m-portlet__head-caption">
                    <div class="m-portlet__head-title">
                      <span class="m-portlet__head-icon m--hide">
                        <i class="flaticon-statistics"></i>
                      </span>
                    </div>
                  </div>
                  <div class="m-portlet__head-tools">
                  </div>
                </div>
                <div class="m-portlet__body" formArrayName="Listhoraire">
                  <div class="row" *ngFor="let items of Listhoraires().controls ; let horaireIndex=index">
                    <div class="col-xl-12 mt-3">
                      <div class="row" [formGroupName]="horaireIndex">
                        <div class="col-md-1 col-sm-1 col-xl-1">
                          <input disabled class="jours" type="text" formControlName="jours" name="jours"
                            style="border: none;" [ngClass]="{'old_info' : items.value.etatvalidation == false}">
                        </div>
                        <div class="col-md-1 col-sm-1 col-xl-2">
                          <span class="days">
                            <ui-switch formControlName="etat" name="etat" size="small">
                            </ui-switch>
                          </span>
                          <span class="jours" *ngIf="items.value.etat == 'true'"> Ouvert </span>
                          <span class="jours" *ngIf="items.value.etat != 'true'"> Fermé </span>
                        </div>
                        <div class="col-md-9 col-sm-12 col-xl-9" formArrayName="horaire">
                          <div *ngIf="items.value.etat != '' || items.value.etat == 'true' ">
                            <div *ngFor="let item of listhorairess(horaireIndex).controls; let indexhorairesup=index ;let last = last">
                              <div class="row" [formGroupName]="indexhorairesup">
                                <div class="col-xl-9 col-md-9">
                                  <div class="control-group row">
                                    <div class=" col-xl-10 col-md-10   mb-2">
                                      <div class="row">
                                        <div class=" col-xl-5  col-md-5"  >
                                          <ng-select [items]="listTimes" placeholder="Ouverture" [virtualScroll]="true"
                                          [ngClass]="{'old_info' : item.value.etatvalidation == false}"
                                            [disabled]="!editable" formControlName="heurdebut">
                                          </ng-select>
                                        </div>
                                        <div class=" col-xl-1">
                                          <span> - </span>
                                        </div>
                                        <div class=" col-xl-5 col-md-5">
                                          <ng-select [items]="listTimes" placeholder="Ouverture" [virtualScroll]="true"
                                          [ngClass]="{'old_info' : item.value.etatvalidation == false}"
                                            [disabled]="!editable" formControlName="heurfin">
                                          </ng-select>
                                        </div>
                                        <div class=" col-xl-1" *ngIf="indexhorairesup >0">
                                          <span class="btn-delete" (click)="removeH(horaireIndex,indexhorairesup)"> <i
                                              class="fa fa-times"></i>
                                          </span>
                                        </div>
                                      </div>
                                    </div>
                                  </div>
                                </div>
                                <div class="col-sm-2 col-xl-2"
                                  *ngIf="(items.value.etat != '' || items.value.etat == 'true') &&  last">
                                  <span class="btnAddHoraires mt-5" (click)="addHoraire(horaireIndex)">Ajouter des
                                    horaires
                                  </span>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>

                    </div>
                  </div>
                </div>
              </div>
              <div class="btncnx mt-3">
                <div style="  display: inline-block; "> <button type="button" class="btn btn-annulation"
                    (click)="FermerAddhoraire()">Annuler</button></div>
                <div style="  display: inline-block; "> <button type="submit" class="btn btn-pub">Appliquer</button>
                </div>
              </div>
              <hr>
              <p>
                <b> Remarque</b> : Nous pourrons examiner vos modifications pour nous assurer de leur qualité. Un délai de
                trois jours peut s'écouler avant publication.
                <a href="https://support.google.com/business/answer/3038311?hl=fr&p=appearance_time&_ga=2.247880903.1770917851.1627024792-981338355.1624523967&visit_id=637626261118919073-2525337260&rd=1"
                  target="_blank">En savoir plus </a>
              </p>
            </form><!-- Form ends -->
          </div>
        </div>
        <!----------------fin horaires------------->


        <!----------Horaires  spéciaux------------>
        <div class="modal-body  libelles" *ngIf="TypeModif == 'horairexceptionnels'" style="width: 90%;left: 5%;">

          <div (ngSubmit)="Modifhoraires()" class="horaireE">
            <div class="col-xl-12 ">
              <span class="title_modifE  mb-4 text-general">Ouverture exceptionnelle</span>
              <div class="row" *ngFor="let item of horairexceptionnels">
                <div class="col-md-2 col-sm-1 col-xl-1  mt-2  text-center">
                  <img src="../assets/Dashboard/suggestion/post-picto-calandar.svg" class="settingcorbeille supp" >
                  </div>

                <div class="col-xl-2 col-md-2 text-center ">
                    <div class="input-group calenderhoraire">
                      <input type="text" [(ngModel)]="item.date"
                        class="form-control datetime" bsDatepicker
                        [bsConfig]="{ isAnimated: true, dateInputFormat: 'DD-MM-YYYY' ,   language: 'Fr'}">
                    </div>
                </div>
                <div  class="col-xl-2 col-md-2 col-sm-1 text-center ">
                  <span class="days">
                    <ui-switch [(ngModel)]="item.etat" name="etat" size="small">
                    </ui-switch>
                  </span>

                </div>
                <div class="col-md-1 col-sm-1 col-xl-2 mt-1">
                  <span class="info_franchise" *ngIf="item.etat == ''"> Ouvert </span>
                  <span class="info_franchise" *ngIf="item.etat != ''"> Fermé </span>
                </div>
              </div>

            </div>
            <hr>
            <div class="col-xl-12 ">
              <div class="adddate" >
                <span class="btnAddHoraires mt-5"  (click)="addhorairexceptionnels()">
                  <img src="../assets/Dashboard/suggestion/post-picto-calandar.svg" class="settingcorbeille supp"> + Ajouter une date </span>
              </div>
              <div class="btncnx mt-3">
                <div style="  display: inline-block; "> <button type="button" class="btn btn-annulation"
                    (click)="FermerAdd()">Annuler</button></div>
                <div style="   display: inline-block; "> <button  type="submit" class="btn btn-pub"  (click)="  SendHoraireExceptional() ">Appliquer</button>
                </div>
              </div>
            </div>
          </div>

        </div>

        <!----------------fin Horaires spéciaux------------->






      <!-------------horaires supplementaires----------->
      <div class="modal-body  libelles horssupp" *ngIf="TypeModif == 'horairesSupp' && Detailshoriares == false && Detailshoriare == false"style="width: 90%;left: 5%;">
        <span class="title_modifE  mb-4 text-general">Horaires supplémentaires</span>
        <p>Vous pouvez ajouter des horaires pour des services spécifiques ou des offres spéciales à votre établissement
          sur Google.</p>
        <span>Ajouter des horaires</span>
        <!-- Form starts -->
        <form [formGroup]="HorairesSuppForm" (ngSubmit)="Modifhoraires()">
          <div class="m-portlet m-portlet--creative m-portlet--first m-portlet--bordered-semi">
            <div class="m-portlet__body">
              <div *ngFor="let item of Groupe_categorie" class="categorie"
                (click)="gethoraires(item.hoursTypeId , item.displayName)">
                <span class="name_categorie"><i class="fa fa-plus"></i> {{item.displayName}}</span>
              </div>
            </div>
          </div>
          <div *ngIf="Groupe_horscategorie.length != 0">
            <span> Vos horaires d'ouverture</span>
            <hr>
            <table class="table align-items-center table-flush table-horaire">
              <tbody>
                <tr *ngFor="let item of Groupe_horscategorie">
                  <td scope="row" class="title_service">
                    {{item.hoursTypeId}}
                  </td>
                  <div *ngFor="let items of item.horaire">
                    <td scope="row" class="title_service" *ngIf="items.etat == 'true'">
                      {{items.jours}}
                    </td>
                    <td scope="row" class="title_service" *ngIf="items.etat == 'true'">
                      <div *ngFor="let items2 of items.horaire" style="padding-left: 73%;">
                        <span scope="row" class="title_service">
                          {{items2.heurdebut}} - {{items2.heurfin}}
                        </span>
                      </div>
                    </td>
                  </div>
                  <td scope="row" class="title_service">
                    <span (click)="detailshoraire(item)"> <i class="fa fa-pencil-alt"></i></span>
                  </td>
                </tr>

              </tbody>
            </table>
          </div>
          <div class="btncnx">
            <div style="  display: inline-block; "> <button type="button" class="btn btn-annulation"
                (click)="FermerAdd()">Annuler</button></div>
            <div style="  display: inline-block; "> <button type="submit" class="btn btn-pub">Appliquer</button> </div>
          </div>
          <hr>
          <p>
            <b> Remarque</b> : Nous pourrons examiner vos modifications pour nous assurer de leur qualité. Un délai de
            trois jours peut s'écouler avant publication.
            <a href="https://support.google.com/business/answer/3038311?hl=fr&p=appearance_time&_ga=2.247880903.1770917851.1627024792-981338355.1624523967&visit_id=637626261118919073-2525337260&rd=1"
              target="_blank">En savoir plus </a>
          </p>
        </form>
        <!-- Form ends -->
      </div>
      <div class="modal-body  libelles horssupp" *ngIf="Detailshoriares == true" style="width: 90%;left: 5%;">
        <span class="title_modifE  mb-4 text-general">{{currentCategorie}}</span>
        <span class="deletehoraires" (click)=delete_horairesupp(currentCategorie)>Supprimer des horaires</span>
        <!-- Form starts -->
        <form [formGroup]="HorairesSuppForm" (ngSubmit)="HorairesSupp()">
          <div class="m-portlet m-portlet--creative m-portlet--first m-portlet--bordered-semi">
            <div class="m-portlet__head">
              <div class="m-portlet__head-caption">
                <div class="m-portlet__head-title">
                  <span class="m-portlet__head-icon m--hide">
                    <i class="flaticon-statistics"></i>
                  </span>
                </div>
              </div>
              <div class="m-portlet__head-tools">
              </div>
            </div>
            <div class="m-portlet__body" formArrayName="Listhoraire">
              <div class="row" *ngFor="let items of Horaires_Supp().controls ; let horaireIndex=index">
                <div class="col-xl-12 mt-3">
                  <div class="row" [formGroupName]="horaireIndex">
                    <div class="col-md-1 col-sm-1 col-xl-1">
                      <input disabled class="jours" type="text" formControlName="jours" name="jours"
                        style="border: none;">
                    </div>
                    <div class="col-md-1 col-sm-1 col-xl-2">
                      <span class="days">
                        <ui-switch formControlName="etat" name="etat" size="small">
                        </ui-switch>
                      </span>
                      <span class="jours" *ngIf="items.value.etat == 'true'"> Ouvert </span>
                      <span class="jours" *ngIf="items.value.etat != 'true'"> Fermé </span>

                    </div>

                    <div class="col-md-9 col-sm-12 col-xl-9" formArrayName="horaire">

                      <div *ngIf="items.value.etat != '' || items.value.etat == 'true' ">
                        <div
                          *ngFor="let horairesupps of horairesuppdetails(horaireIndex).controls; let indexdetails=index ;let last = last">
                          <div class="row" [formGroupName]="indexdetails">

                            <div class="col-xl-9 col-md-9">

                              <div class="control-group row">
                                <div class=" col-xl-10  col-md-10  mb-2">
                                  <div class="row">
                                    <div class=" col-xl-5  col-md-5">
                                      <ng-select [items]="listTimes" placeholder="Ouverture"
                                        [(ngModel)]="horairesupps.heurdebut" [virtualScroll]="true" [disabled]="!editable"
                                        formControlName="heurdebut">
                                      </ng-select>
                                    </div>
                                    <div class=" col-xl-1">
                                      <span> - </span>
                                    </div>

                                    <div class=" col-xl-5 col-md-5">
                                      <ng-select [items]="listTimes" placeholder="Fermeture" [(ngModel)]="horairesupps.heurfin"
                                        [virtualScroll]="true" [disabled]="!editable" formControlName="heurfin">
                                      </ng-select>
                                    </div>
                                    <div class=" col-xl-1" *ngIf="indexdetails >0">
                                      <span class="btn-delete" (click)="removehoraire(horaireIndex,HSindex)"> <i
                                          class="fa fa-times"></i>
                                      </span>
                                    </div>

                                  </div>
                                </div>
                              </div>

                            </div>

                            <div class="col-sm-2 col-xl-3"
                              *ngIf="(items.value.etat != '' || items.value.etat == 'true') && last ">
                              <span class="btnAddHoraires mt-5" (click)="addhorairedetails(horaireIndex)">Ajouter des horaires
                              </span>
                            </div>
                          </div>

                        </div>

                      </div>

                    </div>

                  </div>


                </div>
              </div>


            </div>
          </div>
          <div class="btncnx">
            <div style="  display: inline-block; "> <button type="button" class="btn btn-annulation"
                (click)="fermerdetails()">Annuler</button></div>
            <div style="  display: inline-block; "> <button type="submit" class="btn btn-pub">Continuer</button> </div>
          </div>
          <hr>
          <p>
            <b> Remarque</b> : Nous pourrons examiner vos modifications pour nous assurer de leur qualité. Un délai de
            trois jours peut s'écouler avant publication.
            <a href="https://support.google.com/business/answer/3038311?hl=fr&p=appearance_time&_ga=2.247880903.1770917851.1627024792-981338355.1624523967&visit_id=637626261118919073-2525337260&rd=1"
              target="_blank">En savoir plus </a>
          </p>
        </form><!-- Form ends -->
      </div>
      <div class="modal-body  libelles horssupp" *ngIf="Detailshoriare == true" style="width: 90%;left: 5%;">
        <span class="title_modifE  mb-4 text-general">{{Currentcategoriehoraire}}</span>
        <span class="deletehoraires" (click)=delete_horairesupp(Currentcategoriehoraire)>Supprimer les horaires</span>
        <!-- Form starts -->
        <form [formGroup]="HorairesdetailsForm" (ngSubmit)="HorairesDetails()">
          <div class="m-portlet m-portlet--creative m-portlet--first m-portlet--bordered-semi">
            <div class="m-portlet__head">
              <div class="m-portlet__head-caption">
                <div class="m-portlet__head-title">
                  <span class="m-portlet__head-icon m--hide">
                    <i class="flaticon-statistics"></i>
                  </span>
                </div>
              </div>
              <div class="m-portlet__head-tools">
              </div>
            </div>
            <div class="m-portlet__body" formArrayName="Listhoraire">
              <div class="row" *ngFor="let items of Horaires_details().controls ; let horIndex=index">
                <div class="col-xl-12 mt-3">
                  <div class="row" [formGroupName]="horIndex">
                    <div class="col-md-1 col-sm-1 col-xl-1">
                      <input class="jours" disabled type="text" formControlName="jours" name="jours"
                        style="border: none;">
                    </div>
                    <div class="col-md-1 col-sm-1 col-xl-2">
                      <span class="days">
                        <ui-switch formControlName="etat" name="etat" size="small">
                        </ui-switch>
                      </span>
                      <span class="jours" *ngIf="items.value.etat == 'true'"> Ouvert </span>
                      <span class="jours" *ngIf="items.value.etat != 'true'"> Fermé </span>
                    </div>
                    <div class="col-md-9 col-sm-12 col-xl-9" formArrayName="horaire">
                      <div *ngIf="items.value.etat != '' || items.value.etat == 'true' ">
                        <div
                          *ngFor="let itemhorairedetails of horairedetails(horIndex).controls; let w =index ;let last = last">
                          <div class="row" [formGroupName]="w">
                            <div class="col-xl-9 col-md-9">
                              <div class="control-group row">
                                <div class=" col-xl-10 col-md-10  mb-2">
                                  <div class="row">
                                    <div class=" col-xl-5  col-md-5">
                                      <ng-select [items]="listTimes" placeholder="Ouverture" [virtualScroll]="true"
                                        [disabled]="!editable" formControlName="heurdebut">
                                      </ng-select>

                                    </div>
                                    <div class=" col-xl-1">
                                      <span> - </span>
                                    </div>
                                    <div class=" col-xl-5 col-md-5 ">
                                      <ng-select [items]="listTimes" placeholder="Ouverture" [virtualScroll]="true"
                                        [disabled]="!editable" name="heurfin" formControlName="heurfin">
                                      </ng-select>
                                    </div>
                                    <div class=" col-xl-1" *ngIf="w >0">
                                      <span class="btn-delete" (click)="removehorairesupp(horIndex,w)">
                                        <i class="fa fa-times"></i>
                                      </span>
                                    </div>
                                  </div>
                                </div>
                              </div>
                            </div>
                            <div class="col-sm-2 col-xl-3"
                              *ngIf="(items.value.etat != '' || items.value.etat == 'true') && last">
                              <span class="btnAddHoraires mt-5" (click)="addhorairesupp(horIndex)">Ajouter des horaires
                              </span>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <!-- Submit Button -->
          <div class="btncnx">
            <div style="  display: inline-block; "> <button type="button" class="btn btn-annulation"
                (click)="fermerdetails()">Annuler</button></div>
            <div style="  display: inline-block; "> <button type="submit" class="btn btn-pub">Continuer</button> </div>
          </div>
          <hr>
          <p>
            <b> Remarque</b> : Nous pourrons examiner vos modifications pour nous assurer de leur qualité. Un délai de
            trois jours peut s'écouler avant publication.
            <a href="https://support.google.com/business/answer/3038311?hl=fr&p=appearance_time&_ga=2.247880903.1770917851.1627024792-981338355.1624523967&visit_id=637626261118919073-2525337260&rd=1"
              target="_blank">En savoir plus </a>
          </p>
        </form><!-- Form ends -->
      </div>
      <!-----------fin horaires supplementaires-->
      <!-------------Services----------->
      <div class="modal-body modifEtablissement services" *ngIf="TypeModif == 'Services'">
        <div class="listservice" style="padding-left: 2px;
        margin-top: 13px;
        overflow: auto;
        overflow-y: scroll;
        max-height: 689px;
        padding-right: 10px;
        margin-bottom: 41px;"
          *ngIf="addservice == false && add_Cat == false && showdetailS ==false && delete_Cat ==false">
          <div *ngFor="let item of CategorieServices">
            <table class="table align-items-center table-flush">
              <thead>
                <td>
                  <span class="title_cat"> {{item.nameCat}}</span>

                  <span class="type_cat" *ngIf="item.type =='primaryCategory'"> Catégorie principale</span>
                </td>

                <td>

                  <span class="delete_cat" (click)="deleteCategorie(item.idCat)" *ngIf="item.type !='primaryCategory'">
                    Spprimer </span>
                </td>
              </thead>
              <tbody>
                <tr *ngFor="let service of item.Services">

                  <td scope="row"  [ngClass]="{'old_info' : service.etatvalidation == false}"  class="title_service" (click)="showdetails(service.id ,service.name , item.idCat)">
                    {{service.name}}
                  </td>

                  <td scope="row" class="details_service" (click)="showdetails(service.id , service.name , item.idCat)">
                    <i class="fa fa-chevron-right"></i>
                  </td>
                </tr>
                <tr colspan="2">
                  <td scope="row" class="add_service" (click)="addService(item.idCat , item.nameCat)">
                    <i class="fa fa-plus"></i> Ajouter un autre service
                  </td>
                  <td scope="row">

                  </td>
                </tr>
              </tbody>
            </table>


          </div>


          <div class="add_service_perso" (click)="add_service_Cat()">
            <i class="fa fa-plus"></i> Ajouter une catégorie d'activité
          </div> <br>
        </div>



        <div class="delete_categorie" *ngIf="delete_Cat == true">
          <span class="new_service"> Supprimer la catégorie ?</span>
          <p>Si vous supprimez la catégorie, ces services seront également supprimés de la fiche de votre établissement
            sur Google</p>
          <div class="btncnx">
            <div style="  display: inline-block; "> <button type="button" class="btn btn-annulation"
                (click)="FermerdeleteCat()">Annuler</button></div>
            <div style="  display: inline-block; ">
              <button type="submit" class="btn btn-pub" (click)="deleteCategorie(CurrentCat)">Supprimer</button>
            </div>

          </div>
        </div>



        <div class="groupe_categorie" *ngIf="add_Cat == true">
          <span class="new_service"> Ajouter la catégorie</span>
          <span class="type_service">Catégorie supplémentaire </span>




          <form [formGroup]="CategorieForm" (ngSubmit)="AddCategorie()">
            <div class="addcatperso">
              <ng-select [items]="listcategories" [(ngModel)]='setSelected'
                (keyup)="SearchEtablissement($event.target.value)" bindLabel="displayName" [placeholder]="placeholder"
                [disabled]="!editable" (change)="onChangecategorie($event)" formControlName="Name_cat">
              </ng-select>

              <span class="editcat">
                <i (click)="EditCat(Categorie_value)" class="fa fa-pencil-alt"></i>
              </span>
            </div>

            <div *ngIf="servicesCat.length != 0">
              Ajoutez les services que vous proposez pour permettre aux clients de vous découvrir
              <div class="" *ngFor="let service of servicesCat">
                <div class="service" (click)="changeserviceCat(service)"
                  [ngClass]="{'my_class': service.etat === true}">
                  <span *ngIf="service.etat === false"> <i class="fa fa-plus"></i></span>
                  <span *ngIf="service.etat === true"> <i class="fa fa-check"></i> </span>

                  <span> {{service.name}}</span>

                </div>
              </div>
            </div>



            <div class="addservice mt-5" *ngIf="selectedOption !=''">
              Un service que vous proposez ne figure pas dans la liste ? Ajoutez-le vous même.
              <div class="form-group mb-4 titlepost" formArrayName="listServices">

                <div class="add_service_perso" (click)="add_service_persocat()"> <i class="fa fa-plus"></i> Ajouter un
                  service personnalisé</div> <br>


                <div class="mb-3" *ngFor="let item of CategorieForm.controls['listServices']['controls']; let i=index">
                  <div class="numfiche" [formGroupName]="i">

                    <div class="autreservice">
                      <div class="addserviceperso">
                        <div class="input-group input-group-alternative">
                          <input class="form-control" type="text" id="name_serviceperso" formControlName="name"
                            name="name" #myInput>
                          <i class="far fa-trash-alt" (click)="removeServicePersos(i,id)"></i>
                        </div>

                      </div>
                      <span class="lenghtname"> {{myInput.value.length}} /120</span>
                    </div>
                  </div>

                </div>

              </div>
              <!-- Submit Button -->

            </div>

            <!-- Submit Button -->
            <div class="btncnx">
              <div style="  display: inline-block; "> <button type="button" class="btn btn-annulation"
                  (click)="fermeraddprod()">Annuler</button></div>
              <div style="  display: inline-block; "> <button type="submit" class="btn btn-pub">Enregistrer</button>
              </div>
            </div>
          </form>



        </div>


        <!-----fin add cat------->
        <div class="groupe_service" *ngIf="addservice == true">
          <span class="new_service"> Ajouter des services</span>
          <span class="type_service">Catégorie principale </span>
          <span class="new_service">{{CurrentnameCat}} </span>


          <div *ngIf="servicesCat.length != 0">
            <p>Ajoutez les services que vous proposez pour permettre aux clients de vous découvrir </p>

            Ajoutez les services que vous proposez pour permettre aux clients de vous découvrir
            <div class="" *ngFor="let service of servicesCat">
              <div class="service" (click)="changeserviceCat(service)" [ngClass]="{'my_class': service.etat === true}">
                <span *ngIf="service.etat === false"> <i class="fa fa-plus"></i></span>
                <span *ngIf="service.etat === true"> <i class="fa fa-check"></i> </span>

                <span> {{service.name}}</span>

              </div>
            </div>
          </div>
          <hr>

          <span class="new_service">Services personnalisés</span>
          <p> Un service que vous proposez ne figure pas dans la liste ? Ajoutez-le vous même. </p>


          <!-----------service persooooooo-->
          <form [formGroup]="ServicePersoForm" (ngSubmit)="AddServicePerso()">


            <div class="form-group mb-4 titlepost modifphone" formArrayName="listService">

              <div class="add_service_perso" (click)="add_service_perso()"> <i class="fa fa-plus"></i> Ajouter un
                service personnalisé</div> <br>


              <div *ngFor="let item of ServicePersoForm.controls['listService']['controls']; let s=index">
                <div class="numfiche" [formGroupName]="s">

                  <div class="autreservice">

                    <div class="form-group  titlepost">

                      <div class="input-group input-group-alternative">
                        <input class="form-control" type="text" id="name_serviceperso" formControlName="name"
                          name="name" #myInputs>
                        <i class="far fa-trash-alt" (click)="removeServicePerso(s,id)"></i>
                      </div>
                    </div>
                    <span class="lenghtname"> {{myInputs.value.length}} /120</span>
                  </div>
                </div>

              </div>

            </div>
            <!-- Submit Button -->
            <div class="btncnx">
              <div style="  display: inline-block; "> <button type="button" class="btn btn-annulation"
                  (click)="FermerAddServicePerso()">Annuler</button></div>
              <div style="  display: inline-block; "> <button type="submit" class="btn btn-pub">Appliquer</button>
              </div>

            </div>




          </form>


        </div>
        <!-----details servcie ------->
        <div class="details_service" *ngIf="showdetailS == true">
          <span class="new_service"> Modifier les détails du service</span>
          <span class="type_service">service </span>
          <span class="new_service">{{currentService}} </span>




          <form [formGroup]="ModifServiceForm" (ngSubmit)="ModifService()">


            <div class="form-group mb-4 titlepost modifphone">

              <div class="row">
                <div class="col-xl-6">
                  <div class="form-group mb-4 titlepost">

                    <div>
                      <select style="border-bottom: 1px solid #ced4da;" class="form-control" formControlName="type_service" [(ngModel)]="typeservice"
                        name="status" placeholder="select" (ngModelChange)="onOptionsSelected(typeservice)">
                        <option *ngFor="let item of detailsService" [value]="item.name">{{item.name}}</option>
                      </select>
                    </div>
                  </div>
                </div>
                <div class="col-xl-6">
                  <div class="form-group mb-4 titlepost">

                    <div class="input-group input-group-alternative">
                      <input class="form-control" [readonly]="disabled" [(ngModel)]="PrixService"
                        placeholder="Prix de service (EUR)" type="number" value="0.01" step="0.01"
                        formControlName="prix_service" name="prix_service">
                    </div>
                  </div>
                </div>
              </div>
              <div class="row">
                <div class="col-xl-6">
                  <div class="form-group mb-4 titlepost">

                    <div class="input-group input-group-alternative">
                      <textarea class="form-control" placeholder="Description du service" type="text"
                        formControlName="description_service" [(ngModel)]="DescriptionService"
                        name="description_service">
                    </textarea>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <div class="add_service_perso" (click)="delete_service(current_Service_Id , current_Service_Cat_Id)">
              <i class="far fa-trash-alt"></i> Supprimer le service
            </div> <br>

            <!-- Submit Button -->
            <div class="btncnx">
              <div style="  display: inline-block; "> <button type="button" class="btn btn-annulation"
                  (click)="FermerdetailsService()">Annuler</button></div>
              <div style="  display: inline-block; "> <button type="submit" class="btn btn-pub">Enregistrer</button>
              </div>

            </div>




          </form>


        </div>
      </div>
      <!-------------Produit----------->
      <div class="modal-body modifEtablissement addproduct" *ngIf="TypeModif == 'Addproduct'  ">
        <div *ngIf="showaddProdform == false">
          <span class="title_modifE  mb-4 text-general"> Gérer les produits</span>
          <p>
            Ajoutez des produits à la fiche de votre établissement pour permettre aux utilisateurs de vous trouver dans
            la recherche Google et sur Maps.
          </p>
          <div class="btnproduit">
            <div style="  display: inline-block; ">
              <button type="button" class="btn btn-add_prod" (click)="addprod('add')">Ajouter un produit</button>
            </div>
            <div style="  display: inline-block; " *ngIf="statuts == 'Personnaliser' ">
              <button type="submit" class="btn btn-pub_prod"> <i class="fa fa-eye" aria-hidden="true"></i> Afficher le
                produit sur Google</button>
            </div>
          </div>
          <div class="tabs">
            <ul class="tab-group">
              <li *ngFor="let tab of listcategoriesproduits; index as i" class="tab" [class.active]="tab.active"
                (click)="tabchange(i , tab.id_Categorie)">
                {{tab.Categorie_produit}}
              </li>
            </ul>
            <div class="tab-content-group mt-3">
              <ng-container *ngFor="let prod of listproduits">
                <div class="detailsprod" (click)="editprod('edit' , prod )">
                  <div class="imgprod">
                    <img src={{prod.file}} class="img-prod">
                  </div>

                  <span class="titlecat">{{prod.Nom_produit}}</span>
                </div>
              </ng-container>
            </div>
          </div>
        </div>
        <div *ngIf="showaddProdform == true" class="formprod">
          <span class="title_modifE  mb-4 text-general" *ngIf="typeaction == 'add'">Ajouter un produit</span>
          <div class="row editprod mt-3" *ngIf="typeaction == 'edit'">
            <div class="col-xl-9 col-md-9">
              <span class="title_modifE  mb-4 text-general">Modifier un produit</span>
            </div>
            <div class="col-xl-3 text-right" (click)="deleteproduit(prod)" style="margin-top: -5px;">
              <span><i class="fa fa-trash-alt"></i> </span>
            </div>
          </div>
          <!-- Form starts -->
          <form [formGroup]="ProduitForm" (ngSubmit)="AddProduit()">
            <div class="form-group mb-4 titlepost modifphone catselect">
              <app-upload-photos (onLogoChanged)="GetDataLogo($event)" [picture]="photo_produit"> </app-upload-photos>
              <div class="input-group input-group-alternative mt-3 mb-2">
                <input class="form-control" placeholder="Nom de produit" type="text" formControlName="Nom_produit"
                  #Nomproduit [(ngModel)]='Nom_produit' name="Nom_produit" style="border-radius: initial;">
              </div>
              <div class="" *ngIf="displayMessage.Nom_produit"></div>
              <span class="lenghtname"> {{Nomproduit.value.length}} /58</span>

              <ng-select [items]="listcategoriesp" bindLabel="Categorie_produit"
                placeholder="Sélectionner une catégorie" notFoundText="Sélectionner une catégorie"
                formControlName="Categorie_produit" [(ngModel)]='Categorie_produit' #f
                (change)="Changecategorie(Categorie_produit)">
              </ng-select>

              <div *ngIf="catselected == 'Créer une catégorie'">
                <div class="input-group input-group-alternative mt-3 mb-2">
                  <input class="form-control" placeholder="Catégorie de produit" type="text"
                    formControlName="New_Categorie" [(ngModel)]='New_Categorie' #Cat style="border-radius: initial;">
                </div>
                <div class="" *ngIf="displayMessage.Categorie_produit">
                </div>
                <div class="row expl_cat selectcat">
                  <div class="col-xl-10 col-md-10">
                    <p> Exemples : Tables de salle à manger, Casques audio,Chaussures</p>
                  </div>
                  <div class="col-xl-2 text-right">
                    <span class="lenghtname"> {{Cat.value.length}} /58</span>
                  </div>
                </div>
              </div>
              <div class="row mt-3">
                <div class="col-xl-9 col-md-9">
                  <h4>Afficher la gamme de prix</h4>
                </div>
                <div class="col-xl-3 text-right" style="margin-top: -5px;">
                  <ui-switch (valueChange)="onValueChange($event)" formControlName="gamme_prix" [(ngModel)]='gamme_prix'
                    name="gamme_prix" size="small"></ui-switch>
                </div>
              </div>
              <div class="input-group input-group-alternative mt-3 mb-2" *ngIf="gamme_prix == false">
                <input class="form-control" placeholder="Prix produit (EUR)" type="text" formControlName="Prix_produit"
                  #Cat name="Prix_produit" [(ngModel)]='Prix_produit' style="border-radius: initial;">
              </div>
              <div class="row" *ngIf="gamme_prix == true">
                <div class="col-xl-6">
                  <div class="input-group input-group-alternative mt-3 mb-2">
                    <input class="form-control" placeholder="Prix minimal (EUR)" type="text" [(ngModel)]='Prix_minimal'
                      formControlName="Prix_minimal" name="Prix_minimal" style="border-radius: initial;">
                  </div>
                </div>
                <div class="col-xl-6">
                  <div class="input-group input-group-alternative mt-3 mb-2">
                    <input class="form-control" placeholder="Prix maximal (EUR)" type="text" [(ngModel)]='Prix_maximal'
                      formControlName="Prix_maximal" name="Prix_maximal" style="border-radius: initial;">
                  </div>
                </div>
              </div>
              <div class="input-group input-group-alternative mt-3 mb-2">
                <input class="form-control" placeholder="Description produit" type="text"
                  formControlName="Description_produit" [(ngModel)]='Description_produit' name="Description_produit">
              </div>
              <div class=" mt-3 mb-2">
                <ng-select [items]="Offres" bindLabel="calltoaction" placeholder="Sélectionner un offre"
                  notFoundText="Sélectionner un offre" #t (change)="onChangeOffre(calltoaction)"
                  formControlName="calltoaction" name="calltoaction" [(ngModel)]='calltoaction'>
                </ng-select>
              </div>
              <div class="input-group input-group-alternative mt-3 mb-2" *ngIf="setOffre != 'Aucun'">
                <input class="form-control" placeholder="Lien de votre boutton" type="text"
                  formControlName="lien_produit" [(ngModel)]='lien_produit' name="lien_produit">
              </div>
            </div>
            <div class="btncnx">
              <div style="  display: inline-block; "> <button type="button" class="btn btn-annulation"
                  (click)="fermeraddprod()">Annuler</button></div>
              <div style="  display: inline-block; "> <button type="submit" class="btn btn-pub">Enregistrer</button>
              </div>
            </div>
          </form>
        </div>
      </div>
      <!-------------fin Produit----------->

      <!-------------------zone------------>
      <div class="modal-body modifEtablissement ZonesDesservies" *ngIf="TypeModif == 'ZonesDesservies'">
        <span class="title_modifE  mb-4 text-general">Zones desservies</span>
        <span class="text_zone  mb-4 ">Indiquez aux utilisateurs où votre établissement livre ses
          produits ou fournit ses services</span>
        <form [formGroup]="ZonesForm" (ngSubmit)="AddZone()">
          <span class="deletehoraires">Recherchez et sélectionner des zones</span>
          <ng-select class="mb-5" [items]="zonedesservies" bindLabel="description" placeholder="Montmartre ,Paris"
            (keyup)=" getListzonedesservies($event.target.value)" (change)="onChangezone($event)"
            notFoundText="Aucun zone trouvée" formControlName="zone" [(ngModel)]="selectedzone">
          </ng-select>
          <div class="zonesdesservies">
            <div *ngFor="let zone of listzone ;let i = index;">
              <div class="listzone">
                <p  [ngClass]="{'old_info' : zone.etatvalidation == false}">{{zone.description}}</p> <span> <i class="fa fa-times" (click)="deletezone(i)"></i></span>
              </div>
            </div>
            <span *ngIf="listzone.length != 0" class="deletezone" (click)="deleteListzone()">Effacer les zones
              desservies</span>
          </div>
          <div class="btncnx">
            <div style="  display: inline-block; "> <button type="button" class="btn btn-annulation"
                (click)="FermerAdd()">Annuler</button></div>
            <div style="  display: inline-block; "> <button type="submit" class="btn btn-pub">Appliquer</button> </div>
          </div>
        </form>
        <hr>
        <p>
          <b> Remarque</b> : Nous pourrons examiner vos modifications pour nous assurer de leur qualité. Un délai de
          trois jours peut s'écouler avant publication
          <a href="https://support.google.com/business/answer/3038311?authuser=1&authuser=1&hl=fr&p=appearance_time&_ga=2.211349650.667695829.1627545327-547569408.1626430930&visit_id=637636903162251733-567320171&rd=1"
            target="_blank">En savoir plus </a>
        </p>
      </div>
      <!--------Attributs------->
      <div class="modal-body modifEtablissement Attributs" style="  top: 0%;padding: 0;" *ngIf="TypeModif == 'Attributs'">
        <span class="title_modifE  mb-2 text-general">Attributs</span>
        <div class="search-fiche">
          <span class="nom-fiche"> Rechercher dans ces attributs</span>
          <div class="input-group input-group-alternative">
            <i class="fa fa-search" style="margin-top: 1%;"></i>
            <input type="text" name="search" notFoundText="Aucun établissement trouvée" [(ngModel)]="searchAttribut"
              style="padding-left: 4%;" (keyup)=" getListAttributs(searchAttribut)"
              placeholder="Rechercher dans ces attributs" autocomplete="off" class="form-control">
          </div>
        </div>
        <p class="descrition_attributs mt-4"> Pour partager plus d'informations sur votre établissement avec les
          clients,affichez des attributs sur sa fiche. Ces attributs peuvent apparaître publiquement dans la recherche,
          sur
          Maps et dans d'autres services Google.<br>
          <a target="_blank"
            href="https://support.google.com/business/answer/9049526?authuser=1&authuser=1&hl=fr&p=attributes&_ga=2.255851535.667695829.1627545327-547569408.1626430930&visit_id=637637448587444687-944420013&rd=1">En
            savoir plus</a>
        </p>
        <div class="Attributs2">
          <div *ngFor="let item of listeAttributs , let is = index">
            <span class="type_attribut">{{item.groupeattribute}}</span>
            <div *ngFor="let attribut of item.details">
              <div class="service" (click)="changeattribut(attribut)" [ngClass]="{'attributselected': attribut.etat == 'true' ,  'class2': attribut.etat == 'false',
              'Closed': attribut.etat == 'Closed'}">
                <span *ngIf="attribut.etat == 'true'"> <i class="fa fa-check"></i> </span>
                <span *ngIf="attribut.etat == 'Closed'" style="color: '#1967d2';"> <img
                    src="../assets/Fiche/closed.png" /></span>
                <span *ngIf="attribut.etat == 'false'"> <i class="fa fa-plus"></i></span>
                <span> {{attribut.displayName}}</span>
              </div>
            </div>
            <hr *ngIf="is != (listeAttributs.length -1)">
          </div>
        </div>
        <div class="btncnx">
          <div style="  display: inline-block; "> <button type="button" class="btn btn-annulation"
              (click)="FermerAdd()">Annuler</button></div>
          <div style="  display: inline-block; "> <button (click)="sendAttribut()"
              class="btn btn-pub">Appliquer</button> </div>
        </div>
        <hr>
        <p>
          <b> Remarque</b> : Les modifications seront peut-être examinées. Un délai de trois jours peut être nécessaire
          avant que votre modification ne s'affiche dans la recherche, sur Maps et dans d'autres services Google.
          <a href="https://support.google.com/business/answer/3038311?authuser=1&authuser=1&hl=fr&p=appearance_time&_ga=2.20314943.667695829.1627545327-547569408.1626430930&visit_id=637637448587444687-944420013&rd=1"
            target="_blank">En savoir plus </a>
        </p>
      </div>
      <!-------------Adresse----------->
      <div class="modal-body modifEtablissement Adresse" *ngIf="TypeModif == 'Adresse'">
        <span class="title_modifE  mb-4 text-general">Adresse de l'établissement</span>
        <p class="descrition_attributs mt-4"> Ajoutez une adresse postale pour indiquer l'emplacement de votre
          établissement aux utilisateurs sur Google. Vous pouvez laisser ce champ vide si vous ne possédez pas de
          magasin ou de bureau pour cet établissement.
        </p>
        <form [formGroup]="AdresseForm" (ngSubmit)="sendAdresse()">
          <div class="row">
            <div class="col-xl-4" style="z-index: 999;">
              <div class="search-fiche mb-2">
                <span class="nom-fiche"> Pays / Région</span>
                <div class="input-group input-group-alternative">
                  <input type="text" name="pays" [(ngModel)]="currentpays" disabled style="padding-left: 4%;"
                    formControlName="pays" class="form-control">
                  <div class="tooltip"><i class="far fa-question-circle"></i>
                    <span class="tooltiptext">Vous avez besoin de changer de pays/région ? Veuillez créer un autre établissement.</span>
                  </div>
                </div>
              </div>
              <div class="search-fiche mb-2">
                <span class="nom-fiche"> Adresse postale</span>
                <div class="input-group input-group-alternative">
                  <input type="text" (change)="onKeypress(adresse)" name="adresse" [(ngModel)]="currentAdress"
                    style="padding-left: 4%;" formControlName="adresse" class="form-control">
                  <span *ngIf="AdresseForm.controls['listligne']['controls'].length == '0'" class="add_ligne"
                    (click)="addLigne()">Ajouter une ligne</span>
                </div>
              </div>
              <div class="mb-3" formArrayName="listligne">
                <div class="mb-3"
                  *ngFor="let num of AdresseForm.controls['listligne']['controls']; let i=index , let last=last">
                  <div class="numfiche mb-2" [formGroupName]="i">
                    <span class="nom-fiche"> Adresse : ligne {{i +1}} </span>
                    <div class="input-group input-group-alternative">
                      <input class="form-control" type="text" formControlName="ligne_value" name="ligne_value">
                      <span *ngIf="last" class="add_ligne" (click)="addLigne()">Ajouter une ligne</span>
                    </div>
                  </div>
                </div>
              </div>
              <div class="search-fiche mb-2">
                <span class="nom-fiche"> Code postale</span>
                <div class="input-group input-group-alternative">
                  <input name="code_postale" [(ngModel)]="currentCodePostal" style="padding-left: 4%;"
                    formControlName="code_postale" class="form-control">
                </div>
              </div>
              <div class="search-fiche mb-2">
                <span class="nom-fiche"> Ville</span>
                <div class="input-group input-group-alternative">
                  <input type="text" name="ville" [(ngModel)]="currentVille" style="padding-left: 4%;"
                    class="form-control" formControlName="ville">
                </div>
              </div>
              <div class="supp_add mt-4" (click)="deleteAdresse()" *ngIf="showdeletetext == false">
                <span> Effacer l'adresse </span>
              </div>
              <div class="supp_adresse mt-4" *ngIf="showdeletetext == true">
                <p>Si vous supprimez votre adresse, la situation géographique de votre établissement ne sera pas visible
                  sur Google. Toutefois, les utilisateurs se trouvant dans vos zones desservies pourront toujours vous
                  rechercher.</p>
              </div>
            </div>
            <div class="col-xl-8">
              <span class="position ml-3">Faites glisser le repère pour repositionner votre établissement.</span>
              <div class="map-container">
                <div leaflet style="    width: 100%; height: 100%;     max-height: 250px;"
                  (leafletMapReady)="onMapReady($event)" [leafletOptions]="options">
                </div>
              </div>
            </div>
          </div>
          <div class="btncnx">
            <div style="  display: inline-block; "> <button type="button" class="btn btn-annulation"
                (click)="FermerAdd()">Annuler</button></div>
            <div style="  display: inline-block; "> <button type="submit" class="btn btn-pub">Appliquer</button> </div>
          </div>
        </form>
        <hr>
        <p>
          Les modifications seront peut-être examinées. Un délai de trois jours peut être nécessaire avant que votre
          modification ne s'affiche dans la recherche, sur Maps et dans d'autres services Google.
          <a href="https://support.google.com/business/answer/3038311?authuser=1&authuser=1&hl=fr&p=appearance_time&_ga=2.180370980.2094712910.1628609370-547569408.1626430930&visit_id=637642642341164749-2160297720&rd=1"
            target="_blank">En savoir plus </a>
        </p>
      </div>
      <!-------------fin Adresse----------->


      <!---------------findescription------------->

      <!---------------Ouverture------------->
      <div class="modal-body modifEtablissement Ouverture" *ngIf="TypeModif == 'Ouverture'">
        <span class="title_modifE  mb-4 text-general"> Description fournie par l'établissement</span>
        <p> Décrivez votre établissement auprès des utilisateurs sur Google. <a
            href="https://support.google.com/business/answer/3039617?hl=fr&_ga=2.50764969.1288586239.1633935135-1743924324.1633071322#description&zippy=%2Cde-l%C3%A9tablissement"
            target="_blank">En savoir plus </a></p>
        <!-- Form starts -->
        <form [formGroup]="DateouvertureForm" (ngSubmit)="Modifdateouverture()">
          <div class="form-group mb-4 titlepost">
            <div class="row" *ngFor="let fiche of detailsfiche">
              <div class="col-xl-4">
                <div class="input-group input-group-alternative">
                  <input class="form-control" [(ngModel)]="Annee" placeholder="Année" type="text"
                  [ngClass]="{'old_info' : fiche.ouverture.etatvalidation == false}"
                    formControlName="Annee" name="Annee">
                </div>
              </div>
              <div class="col-xl-4">
                  <ng-select [items]="ListMois"
                   [(ngModel)]="Mois"
                    formControlName="Mois" [ngClass]="{'old_info' : fiche.ouverture.etatvalidation == false}"
                     name="Mois" bindLabel="Mois"  placeholder="Mois" >
                </ng-select>
              </div>
              <div class="col-xl-4">
                <ng-select [items]="listJours"
                 [(ngModel)]="Jours"
                  formControlName="Jours"  [ngClass]="{'old_info' : fiche.ouverture.etatvalidation == false}"
                   name="Jours" bindLabel="Jours"  placeholder="Jours" >
              </ng-select>
            </div>

            </div>
            <span class="infos mt-2">Veuillez indiquer au moins l'année et le mois</span>
          </div>
          <!-- Submit Button -->
          <div class="btncnx">
            <div style="  display: inline-block; "> <button type="button" class="btn btn-annulation"
                (click)="FermerAdd()">Annuler</button></div>
            <div style="  display: inline-block; ">
              <button type="submit" class="btn btn-pub" [disabled]="!DateouvertureForm.valid">Appliquer</button>
            </div>
          </div>
          <hr>
          <p>
            Les modifications seront peut-être examinées. Un délai de trois jours peut être nécessaire avant que votre modification ne s'affiche dans la recherche, sur Maps et dans d'autres services Google.
            <a href="https://support.google.com/business/answer/3038311?hl=fr&p=appearance_time&_ga=2.117891081.1288586239.1633935135-1743924324.1633071322&visit_id=637696311743723431-2177954929&rd=1"
              target="_blank">En savoir plus </a>
          </p>
        </form><!-- Form ends -->
      </div>
      <!---------------fin Ouverture------------->

      <!--------------------Categorie-------------->
      <div class="modal-body modifEtablissement categ" *ngIf="TypeModif == 'Categorie'">
        <span class="title_modifE  mb-4 text-general">Catégorie</span>
        <p> Aidez les clients à trouver votre entreprise par secteur. </p>


        <!-- Form starts -->
        <form [formGroup]="CatForm" (ngSubmit)="Modifcategorie()">
          <div class="form-group mb-4 titlepost">
            <span class="title mb-2"> Catégorie principale</span>
            <ng-select [items]="listcategories"  [(ngModel)]="categorieprincipal"
            (keyup)="SearchEtablissement($event.target.value)"
            bindLabel="displayName"
            [ngClass]="{'old_info' : etatvalidationcatp == false}"
            notFoundText="Sélectionner une catégorie"
            [placeholder]="placeholder"
            [disabled]="!editable" (change)="onChangecategorie($event)" formControlName="Catprincipal">
          </ng-select>
          <span class="title mt-3"> Catégories supplémentaires</span>
          <div class="form-group mb-4 titlepost" formArrayName="listCat">
            <div class="add_service_perso" (click)="add_cat()"> <i class="fa fa-plus"></i> Ajouter une autre catégorie</div> <br>
            <div class="mb-3 listcatsupp" *ngFor="let item of CatForm.controls['listCat']['controls']; let i=index">
              <div class="numfiche" [formGroupName]="i">
                <div class="autreservice">
                  <div class="addcat">
                      <ng-select [items]="listcategoriesModal"
                      (keyup)="SearchEtablissement($event.target.value)"
                      bindLabel="displayName"
                      [ngClass]="{'old_info' : etatvalidationcatp == false}"
                      notFoundText="Sélectionner une catégorie"
                      [placeholder]="placeholder"
                      [disabled]="!editable"  formControlName="displayName">
                    </ng-select>
                  </div>
                  <span  class="btn-delete" (click)="removecat(i,id)"><i  class="fa fa-times"></i></span>
                </div>
              </div>

            </div>

          </div>

          </div>
          <div class="btncnx">
            <div style="  display: inline-block; "> <button type="button" class="btn btn-annulation"
                (click)="FermerAdd()">Annuler</button></div>
            <div style="  display: inline-block; ">
              <button type="submit" class="btn btn-pub" [disabled]="!CatForm.valid">Appliquer</button>
            </div>

          </div>

          <hr>

          <p>
            Les modifications seront peut-être examinées. Un délai de trois jours peut être nécessaire avant que votre modification ne s'affiche dans la recherche, sur Maps et dans d'autres services Google.
            <a href="https://support.google.com/business/answer/3038311?hl=fr&p=appearance_time&_ga=2.117891081.1288586239.1633935135-1743924324.1633071322&visit_id=637696311743723431-2177954929&rd=1"
              target="_blank">En savoir plus </a>
          </p>

        </form><!-- Form ends -->
      </div>
      <!-------------fin catégorie---------->

      <!-------------footer----------->

      <!-------------fin footer----------->
    </ng-template>
  </div>
  <div id="notifs-delete">
    <ng-template #contentfermeture let-modal>

      <div class="modal-body" style=" display: block;margin: 50px auto; width: 90%;top: 0;" *ngIf="actionfermeture == 'temporairement'">
        <p class="infos-posts"> Marquer cet établissement comme temporairement fermé ?  </p>
        <p>Vous pouvez choisir de marquer cet établissement comme ouvert à tout moment. </p>
        <div class="modal-footer"  *ngIf="actionfermeture == 'temporairement'">
          <button  type="button" class="btn btn-annuler"
            (click)="FermerAdd()">Annuler</button>
          <button type="button" class="btn btn-outline"
            (click)="Fermer_fiche_temporaire()">Fermer l'établissement</button>
        </div>
      </div>



      <div class="modal-body" style=" display: block;margin: 50px auto; width: 90%;top: 0;" *ngIf="actionfermeture == 'definitivement'">
        <p class="infos-posts"> Marquer cet établissement comme fermé définitivement ?  </p>
        <p>Les établisssements fermés définitivement seront mois visibles sur Google.
          Vous pouvez choisir de marquer cet établissement comme ouvert à tout moment</p>
          <div class="modal-footer"  *ngIf="actionfermeture == 'definitivement'">
            <button  type="button" class="btn btn-annuler"
              (click)="FermerAdd()">Annuler</button>
            <button type="button" class="btn btn-outline"
              (click)="Fermer_fiche_definitivement()">Fermer l'établissement</button>



          </div>
      </div>



    </ng-template>
    <simple-notifications></simple-notifications>
  </div>
  <!---------Add user----------->
  <div id="notifs-delete">
    <ng-template #contentadduser let-modal>
      <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
        <span aria-hidden="true">&times;</span>
      </button>
      <div class="modal-body" style="top: 22%; width: 60%;     margin: 0 auto;">
        <p class="infos-posts"> Ajouter des utilisateurs  </p>
        <p class="text-general">Autorisez d'autres personnes à vous aider à gérer les informations de cet établissement et les avis publiés par les clients.</p>

          <div class="form-group mb-4 titlepost">

            <span class="nom-fiche mb-3"> Saisissez des noms ou des adresses e-mail </span>
            <div class="input-group input-group-alternative">

              <input class="form-control" [(ngModel)]="user_name"
               type="text"
                name="user_name">
            </div>
          </div>
          <div class="row">
            <div class="col-xl-6">
              <ng-select [items]="TypeUsers" placeholder ="Sélectionner un rôle" [(ngModel)]=user_role bindLabel="name" value="user.type">
              </ng-select>
            </div>
            <div class="col-xl-6">
              <p class="lienexterne mt-2">
                <a href="https://support.google.com/business/answer/3415281?_ga=2.22300219.1862785022.1644835426-28328830.1642066865&visit_id=637805176612799656-856470840&rd=1#roles&zippy=%2Ccomprendre-les-r%C3%B4les-de-propri%C3%A9taire-et-dadministrateur-de-la-fiche%2Cunderstand-profile-owner-manager-roles"
                  target="_blank">En savoir plus sur les rôles </a>
              </p>
            </div>
          </div>
          <div class="modal-footer mt-5 text-right" >
          <button type="button" class="btn btn-annulation" (click)="FermerAdd()">Annuler</button>
          <button type="submit" class="btn btn-pub ml-0" (click)="add_user( user_name,user_role)">Inviter</button>


          </div>
      </div>
      <div class="modal-footer" style="    top: 0px;">
        <div style="background: url(./assets/Dashboard/bg-footer.png); background-size: 100% 100%; height: 87px;"></div>
      </div>

    </ng-template>
    <simple-notifications></simple-notifications>
  </div>
 <!---------delete user-------->
 <div id="notifs-delete">
  <ng-template #contentsupp let-modal>

    <div *ngIf="FicheDissocier == false">
      <div class="modal-body suppfiche" class="delete-utilisateur" *ngIf="user.pendingInvitation == '0'">
        <p class="title-fiche text-left text-general"> Supprimer un utilisateur</p>
        <p class="suppfiche text-left"> Voulez-vous vraiment supprimer <b>{{user.firstname}} </b> du compte <b>{{locationName}}</b> ? </p>
        <p>L'utilisateur perdra l'accès à ce compte et au contenu associé dans la fiche d'établissement Google.</p>
        <div class="modal-footer mt-3 text-center" >

          <button type="submit" class="btn btn-outline" (click)="Deleteuser(user.userid)">Supprimer</button>
          <button type="button" class="btn btn-annulation ml-0" (click)="FermerAdd()">Annuler</button>
        </div>
      </div>
      <div class="modal-body suppfiche"  class="delete-utilisateur"  *ngIf="user.pendingInvitation == '1'">
        <p class="title-fiche text-left text-general">Annuler l'invitation</p>
        <p class="suppfiche text-left"> Voulez-vous vraiment révoquer l'invitation que vous aviez envoyée à <b>{{user.firstname}} </b> pour lui permettre de devenir Propriétaire du compte <b>{{locationName}}</b> ? </p>
        <div class="modal-footer mt-3 text-center" >

          <button type="submit" class="btn btn-outline" (click)="Deleteuser(user.userid)">Confirmer</button>
          <button type="button" class="btn btn-annulation ml-0" (click)="FermerAdd()">Annuler</button>
        </div>
      </div>
    </div>




    <div class="modal-body text-center"   class="delete-utilisateur" *ngIf="FicheDissocier == true">
      <p class="title-fiche text-left"> Avertissement</p>
      <p class="suppfiche text-left">  La fiche [<b>{{locationName}}</b>] va être retiré de la liste, <br> êtes-vous sûr ?</p>

      <div class="modal-footer mt-3 text-center" >

        <button type="button" class="btn btn-outline" (click)="DissocierFiche()">Dissocier</button>
      <button type="button" class="btn btn-annulation ml-0" (click)="FermerAdd()">Annuler</button>
      </div>
    </div>
  </ng-template>
  <simple-notifications></simple-notifications>
</div>
  <simple-notifications></simple-notifications>
</div>
